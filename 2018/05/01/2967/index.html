<!DOCTYPE html><html lang="ja-JP"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Core"><title>開発メモ その115 nvidia-dockerをUbuntu 18.04にインストールする · A certain engineer "COMPLEX"</title><meta name="description" content="IntroductionUSBメモリにUbuntu 18.04をインストールしたため、Windowsが入っているディスクを汚さずにUbuntuを使えるようになりました。 で、2018年4月26日にリリースされたUbuntu 18.04 LTSをインストールしました。 が、情報が少ないせいか、dock"><meta name="keywords"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><script src="/js/jquery.js"></script><meta name="generator" content="Hexo 5.1.0"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h3 title=""><a href="/">A certain engineer &quot;COMPLEX&quot;</a></h3><div class="description"><p>とある技術者の劣等感</p></div></div></div><ul class="social-links"><li><a target="_blank" rel="noopener" href="https://github.com/takuya-takeuchi"><i class="fa fa-github"></i></a></li><li><a target="_blank" rel="noopener" href="https://twitter.com/takuya_takeuchi"><i class="fa fa-twitter-square"></i></a></li><li><a target="_blank" rel="noopener" href="https://www.facebook.com/takuya.takeuchi.sns"><i class="fa fa-facebook-square"></i></a></li></ul><div class="footer"><div class="p"> <span>© 2020 </span><i class="fa fa-star"></i><span> Core</span></div><div class="by_farbox"><span>Powered by </span><a href="https://hexo.io/" target="_blank">Hexo </a><span> & </span><a href="https://github.com/mrcore/hexo-theme-Anatole-Core" target="_blank">Anatole-Core  </a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">ホーム</a></li><li><a href="/archives">アーカイブ</a></li><li><a href="/tags">タグ</a></li><li><a href="/about">自己紹介</a></li><li><a href="/guestbook">メッセージ</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>開発メモ その115 nvidia-dockerをUbuntu 18.04にインストールする</a></h3></div><div class="post-content"><h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>USBメモリに<strong>Ubuntu 18.04</strong>をインストールしたため、Windowsが入っているディスクを汚さずにUbuntuを使えるようになりました。 で、2018年4月26日にリリースされた<strong>Ubuntu 18.04 LTS</strong>をインストールしました。 が、情報が少ないせいか、dockerがインストールできない!!とか色々… 最初は、<strong>docker-ce</strong>がいるのか!!とか思ってapt-getだ、githubだ、ソースビルドだ、って頑張ったけど、そんなものはいらないことがわかりましした。</p>
<h1 id="Try-out"><a href="#Try-out" class="headerlink" title="Try out!!"></a>Try out!!</h1><p>手順はここに書いてあるとおり。事前にNvidia Driverは入れておきましょう。 </p>
<div class="blog-card"><div class="hbc-link-wrap"><a class="hbc-link" href="https://github.com/NVIDIA/nvidia-docker" target="_blank" rel="nofollow"><div class="hbc-card"><div class="hbc-info"><img class="hbc-favicon" src="http://www.google.com/s2/favicons?domain=github.com"></img><div class="hbc-site-name">GitHub</div></div><div class="hbc-contents"><div class="hbc-thumbnail"><img src="https://avatars0.githubusercontent.com/u/1728152?s=400&v=4"></img></div><div class="hbc-text"><div class="hbc-title">NVIDIA/nvidia-docker</div><div class="hbc-url">https://github.com/NVIDIA/nvidia-docker</div><div class="hbc-description">Build and run Docker containers leveraging NVIDIA GPUs - NVIDIA/nvidia-docker</div></div></div></div></a></div></div>

<p>[code lang=”sh”] # リポジトリを追加 $ curl -s -L <a target="_blank" rel="noopener" href="https://nvidia.github.io/nvidia-docker/gpgkey">https://nvidia.github.io/nvidia-docker/gpgkey</a> | sudo apt-key add - $ distribution=$(. /etc/os-release;echo $ID$VERSION_ID) $ curl -s -L <a target="_blank" rel="noopener" href="https://nvidia.github.io/nvidia-docker/$distribution/nvidia-docker.list">https://nvidia.github.io/nvidia-docker/$distribution/nvidia-docker.list</a> | \ sudo tee /etc/apt/sources.list.d/nvidia-docker.list $ sudo apt-get update<br># nvidia-docker2をインストール $ sudo apt-get install -y nvidia-docker2 # dockerのデーモンを設定して再読込 $ sudo pkill -SIGHUP dockerd<br># nvidia-smiをコンテナ上で動かす $ docker run –runtime=nvidia –rm nvidia/cuda nvidia-smi [/code] これだけです。 最後のコマンドを動かすと、グラフィックボードの状態が出力されます。 [code lang=”sh”] $ docker run –runtime=nvidia –rm nvidia/cuda nvidia-smi Tue May 1 10:58:19 2018 +—————————————————————————–+ | NVIDIA-SMI 390.48 Driver Version: 390.48 | |——————————-+———————-+———————-+ | GPU Name Persistence-M| Bus-Id Disp.A | Volatile Uncorr. ECC | | Fan Temp Perf Pwr:Usage/Cap| Memory-Usage | GPU-Util Compute M. | |===============================+======================+======================| | 0 GeForce GTX 1080 Off | 00000000:01:00.0 On | N/A | | 27% 33C P8 7W / 180W | 282MiB / 8117MiB | 0% Default | +——————————-+———————-+———————-+<br>+—————————————————————————–+ | Processes: GPU Memory | | GPU PID Type Process name Usage | |=============================================================================| +—————————————————————————–+ [/code] ちなみに、docker-ceの17.12が動いています。 [code lang=”sh”] $ docker version Client: Version: 17.12.1-ce API version: 1.35 Go version: go1.10.1 Git commit: 7390fc6 Built: Wed Apr 18 01:23:11 2018 OS/Arch: linux/amd64<br>$ apt-cache depends nvidia-docker2 nvidia-docker2 依存: nvidia-container-runtime 依存: docker.io 破壊: 置換: [/code] このことは、<a target="_blank" rel="noopener" href="https://github.com/NVIDIA/nvidia-docker/issues/643">Can not install nvidia-docker2 with docker 17.12.0-ce installed #607</a>にも書いてありました。</p>
<blockquote>
<p>Packages released for ubuntu 18.04 today. It depends on docker.io, since docker-ce doesn’t have packages for 18.04 yet. Ubuntu 18.04 向けのパッケージが今日リリースされたよ。docker-ceは18.04向けのパッケージをまだ持っていないから、dockr.ioに依存しているよ。</p>
</blockquote>
<p>でもまぁ。nvidia-dockerが動くようになったので、遠慮無くcudaで遊べます。CUDAのバージョンとか気にしなくて良いので。</p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2018-05-01</span><i class="fa fa-tag"></i><a class="tag" href="/categories/仮想化/" title="仮想化">仮想化 </a><a class="tag" href="/categories/仮想化/Docker/" title="Docker">Docker </a><a class="tag" href="/categories/Linux/" title="Linux">Linux </a><a class="tag" href="/categories/linux/" title="linux">linux </a><a class="tag" href="/categories/linux/Ubuntu/" title="Ubuntu">Ubuntu </a><span class="leancloud_visitors"></span></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="" onclick="javascript:join_favorite()" ref="sidebar"></a></div><div class="twitter"><a class="fa fa-twitter" target="_blank" rel="noopener" href="http://twitter.com/home?status=,https://takuya-takeuchi.github.io/2018/05/01/2967/,A certain engineer &quot;COMPLEX&quot;,開発メモ その115 nvidia-dockerをUbuntu 18.04にインストールする,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2018/05/01/2981/" title="開発メモ その116 /etc/fstabでホームディレクトリを認識しない">前へ</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2018/05/01/2974/" title="開発メモ その114 Ubuntu 18.04でNvidia Driverをインストールする">次へ</a></li></ul></div></div></div></div></div><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/js/add-bookmark.js"></script></body></html>