<!DOCTYPE html><html lang="ja-JP"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Core"><title>開発メモ その138 ChainerでDCGANのサンプル実行中に遭遇したエラー · A certain engineer "COMPLEX"</title><meta name="description" content="Introductionchainerに付属している DCGAN(Deep Convolution Generative Adversarial Networks) のサンプルを動かした際のエラーについての対応メモ。
Resolutionbackend がない下記のエラーが出る。
1234567&amp;g"><meta name="keywords"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="/css/blogcard.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><script src="/js/jquery.js"></script><meta name="generator" content="Hexo 5.1.0"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.webp" style="width:127px;"><h3 title=""><a href="/">A certain engineer &quot;COMPLEX&quot;</a></h3><div class="description"><p>とある技術者の劣等感</p></div></div></div><ul class="social-links"><li><a target="_blank" rel="noopener" href="https://github.com/takuya-takeuchi"><i class="fa fa-github"></i></a></li><li><a target="_blank" rel="noopener" href="https://twitter.com/takuya_takeuchi"><i class="fa fa-twitter-square"></i></a></li><li><a target="_blank" rel="noopener" href="https://www.facebook.com/takuya.takeuchi.sns"><i class="fa fa-facebook-square"></i></a></li></ul><div class="footer"><div class="p"> <span>© 2020 </span><i class="fa fa-star"></i><span> Core</span></div><div class="by_farbox"><span>Powered by </span><a href="https://hexo.io/" target="_blank">Hexo </a><span> & </span><a href="https://github.com/mrcore/hexo-theme-Anatole-Core" target="_blank">Anatole-Core  </a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="search"><div class="text"><input placeholder="検索ワードを入力してください" id="search-text" onkeypress="javascript:search(event)"></div><div class="btn"><a><i class="fa fa-search"></i></a></div></div><div class="nav"><li><a href="/">ホーム</a></li><li><a href="/archives">アーカイブ</a></li><li><a href="/tags">タグ</a></li><li><a href="/about">自己紹介</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>開発メモ その138 ChainerでDCGANのサンプル実行中に遭遇したエラー</a></h3></div><div class="post-content"><h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p><strong>chainer</strong>に付属している <strong>DCGAN(Deep Convolution Generative Adversarial Networks)</strong> のサンプルを動かした際のエラーについての対応メモ。</p>
<h1 id="Resolution"><a href="#Resolution" class="headerlink" title="Resolution"></a>Resolution</h1><h3 id="backend-がない"><a href="#backend-がない" class="headerlink" title="backend がない"></a>backend がない</h3><p>下記のエラーが出る。</p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; python -i train_dcgan.py</span><br><span class="line">Traceback (most recent <span class="keyword">call</span> last):</span><br><span class="line">  File &quot;train_dcgan.py&quot;, line <span class="number">9</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    from <span class="built_in">net</span> import Discriminator</span><br><span class="line">  File &quot;D:\Works\Python\Envs\chainer\chainer\examples\dcgan\<span class="built_in">net</span>.py&quot;, line <span class="number">5</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    from chainer import backend</span><br><span class="line"><span class="function">ImportError: <span class="title">cannot</span> <span class="title">import</span> <span class="title">name</span> &#x27;<span class="title">backend</span>&#x27;</span></span><br></pre></td></tr></table></figure>

<p>理由としては、現時点(2018/10/21)でのgithubのリポジトリがChainerの<strong>v5.0</strong>へ移行し始めている。<br>その過程でI/Fに下記の変更がはいった模様。</p>


<p>要するに、 </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> chainer <span class="keyword">import</span> backends </span><br></pre></td></tr></table></figure>

<p>が </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> chainer <span class="keyword">import</span> backend </span><br></pre></td></tr></table></figure>

<p>こうなったと。<br>で、<strong>pip</strong>からインストールしたchainerは </p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&gt; python -m pip freeze chainer</span><br><span class="line">certifi==<span class="number">2018</span>.<span class="number">10</span>.<span class="number">15</span></span><br><span class="line">chainer==<span class="number">4</span>.<span class="number">5</span>.<span class="number">0</span></span><br><span class="line">colorama==<span class="number">0</span>.<span class="number">3</span>.<span class="number">9</span></span><br><span class="line">cupy==<span class="number">4</span>.<span class="number">5</span>.<span class="number">0</span></span><br><span class="line">fastrlock==<span class="number">0</span>.<span class="number">4</span></span><br><span class="line">filelock==<span class="number">3</span>.<span class="number">0</span>.<span class="number">9</span></span><br><span class="line">isort==<span class="number">4</span>.<span class="number">3</span>.<span class="number">4</span></span><br><span class="line">lazy-object-proxy==<span class="number">1</span>.<span class="number">3</span>.<span class="number">1</span></span><br><span class="line">mccabe==<span class="number">0</span>.<span class="number">6</span>.<span class="number">1</span></span><br><span class="line">numpy==<span class="number">1</span>.<span class="number">15</span>.<span class="number">2</span></span><br><span class="line">protobuf==<span class="number">3</span>.<span class="number">6</span>.<span class="number">1</span></span><br><span class="line">six==<span class="number">1</span>.<span class="number">11</span>.<span class="number">0</span></span><br><span class="line">typed-ast==<span class="number">1</span>.<span class="number">1</span>.<span class="number">0</span></span><br><span class="line">wincertstore==<span class="number">0</span>.<span class="number">2</span></span><br></pre></td></tr></table></figure>

<p>となっており、ずれている、というわけです。<br>なので、githubのブランチを<strong>v4</strong>に変更して実行するのが正解。</p>
<h3 id="PIL-がない"><a href="#PIL-がない" class="headerlink" title="PIL がない"></a>PIL がない</h3><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; python -i train_dcgan.py</span><br><span class="line">Traceback (most recent <span class="keyword">call</span> last):</span><br><span class="line">  File &quot;train_dcgan.py&quot;, line <span class="number">14</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    from visualize import out_generated_image</span><br><span class="line">  File &quot;D:\Works\Python\Envs\chainer\chainer\examples\dcgan\visualize.py&quot;, line <span class="number">6</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    from PIL import Image</span><br><span class="line"><span class="function">ModuleNotFoundError: <span class="title">No</span> <span class="title">module</span> <span class="title">named</span> &#x27;<span class="title">PIL</span></span></span><br></pre></td></tr></table></figure>

<p>なので、<strong>Pillow</strong>をインストール。<br>いつも、<strong>PIL</strong>をインストールしようとするけど、そういう名前のパッケージはないのね。</p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; python -m pip install Pillow</span><br><span class="line">Collecting Pillow</span><br><span class="line">  Downloading https://files.pythonhosted.org/packages/bd/<span class="number">39</span>/c76eaf781343162bdb1cf4854cb3bd5947a87ee44363e5acd6c48d69c4a1/Pillow-<span class="number">5</span>.<span class="number">3</span>.<span class="number">0</span>-cp36-cp36m-win_amd64.whl (<span class="number">1</span>.<span class="number">6</span>MB)</span><br><span class="line">    <span class="number">100</span>% |████████████████████████████████| <span class="number">1</span>.<span class="number">6</span>MB <span class="number">975</span>kB/s</span><br><span class="line">Installing collected packages: Pillow</span><br><span class="line">Successfully installed Pillow-<span class="number">5</span>.<span class="number">3</span>.<span class="number">0</span></span><br></pre></td></tr></table></figure>

<h3 id="CUDAが使えない"><a href="#CUDAが使えない" class="headerlink" title="CUDAが使えない"></a>CUDAが使えない</h3><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt; python -i train_dcgan.py -g <span class="number">0</span></span><br><span class="line"><span class="function">GPU: 0</span></span><br><span class="line"><span class="function"># <span class="title">Minibatch</span>-<span class="title">size</span>: 50</span></span><br><span class="line"><span class="function"># <span class="title">n_hidden</span>: 100</span></span><br><span class="line"><span class="function"># <span class="title">epoch</span>: 1000</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">D</span>:\<span class="title">Works</span>\<span class="title">Python</span>\<span class="title">Envs</span>\<span class="title">chainer</span>\<span class="title">lib</span>\<span class="title">site</span>-<span class="title">packages</span>\<span class="title">chainer</span>\<span class="title">backends</span>\<span class="title">cuda.py</span>:95: <span class="title">UserWarning</span>: <span class="title">cuDNN</span> <span class="title">is</span> <span class="title">not</span> <span class="title">enabled</span>.</span></span><br><span class="line"><span class="function"><span class="title">Please</span> <span class="title">reinstall</span> <span class="title">CuPy</span> <span class="title">after</span> <span class="title">you</span> <span class="title">install</span> <span class="title">cudnn</span></span></span><br><span class="line"><span class="function">(<span class="title">see</span> <span class="title">https</span>://<span class="title">docs</span>-<span class="title">cupy.chainer.org</span>/<span class="title">en</span>/<span class="title">stable</span>/<span class="title">install.html</span>#<span class="title">install</span>-<span class="title">cupy</span>-<span class="title">with</span>-<span class="title">cudnn</span>-<span class="title">and</span>-<span class="title">nccl</span>).</span></span><br><span class="line"><span class="function">  &#x27;<span class="title">cuDNN</span> <span class="title">is</span> <span class="title">not</span> <span class="title">enabled</span>.\<span class="title">n</span>&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>cuDNN</strong>をインストールして、<strong>CuPy</strong>を再インストールしろ、ってエラーです。<br>自分の環境にインストールされているcuDNNを調べて適切なCuPyをインストールします。<br>普通の<strong>CuPy</strong>は削除しなくてもOKでした。</p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt; python -m pip install cupy-cuda92</span><br><span class="line">Collecting cupy-cuda92</span><br><span class="line">  Downloading https://files.pythonhosted.org/packages/<span class="number">1</span>a/<span class="number">23</span>/<span class="number">0</span>a8f34c97486ff7e18c5db9bcd76f62605adcf9b63f6fc247229e5df24b4/cupy_cuda92-<span class="number">4</span>.<span class="number">5</span>.<span class="number">0</span>-cp36-cp36m-win_amd64.whl (<span class="number">231</span>.<span class="number">7</span>MB)</span><br><span class="line">    <span class="number">100</span>% |████████████████████████████████| <span class="number">231</span>.<span class="number">7</span>MB <span class="number">92</span>kB/s</span><br><span class="line">Requirement already satisfied: numpy&gt;=<span class="number">1</span>.<span class="number">9</span>.<span class="number">0</span> <span class="keyword">in</span> d:\works\python\envs\chainer\lib\site-packages (from cupy-cuda92) (<span class="number">1</span>.<span class="number">15</span>.<span class="number">2</span>)</span><br><span class="line">Requirement already satisfied: six&gt;=<span class="number">1</span>.<span class="number">9</span>.<span class="number">0</span> <span class="keyword">in</span> c:\users\takuya\appdata\roaming\python\python36\site-packages (from cupy-cuda92) (<span class="number">1</span>.<span class="number">11</span>.<span class="number">0</span>)</span><br><span class="line">Requirement already satisfied: fastrlock&gt;=<span class="number">0</span>.<span class="number">3</span> <span class="keyword">in</span> d:\works\python\envs\chainer\lib\site-packages (from cupy-cuda92) (<span class="number">0</span>.<span class="number">4</span>)</span><br><span class="line">Installing collected packages: cupy-cuda92</span><br><span class="line">Successfully installed cupy-cuda92-<span class="number">4</span>.<span class="number">5</span>.<span class="number">0</span></span><br></pre></td></tr></table></figure>

<p>cuDNNは<strong>C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\vX.X</strong>に適切に展開されている必要があります。</p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2018-10-22</span><i class="fa fa-tag"></i><a class="tag" href="/categories/ディープラーニング/" title="ディープラーニング">ディープラーニング </a><a class="tag" href="/categories/ディープラーニング/Chainer/" title="Chainer">Chainer </a><span class="leancloud_visitors"></span></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="" onclick="javascript:join_favorite()" ref="sidebar"></a></div><div class="twitter"><a class="fa fa-twitter" target="_blank" rel="noopener" href="http://twitter.com/home?status=,https://takuya-takeuchi.github.io/2018/10/22/3221/,A certain engineer &quot;COMPLEX&quot;,開発メモ その138 ChainerでDCGANのサンプル実行中に遭遇したエラー,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2018/10/28/3343/" title="開発メモ その139 Hyper-Vの詳細な解析ログを取得する">前へ</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2018/10/20/3218/" title="開発メモ その137 Chainer with CUDA on Anaconda3 for Windowsを使う">次へ</a></li></ul></div></div></div></div></div><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/js/add-bookmark.js"></script><script src="/js/search.js"></script></body></html>