<!DOCTYPE html><html lang="ja-JP"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Core"><link rel="icon" href="/images/favicon.ico" type="image/x-icon"><title>.NETでIBM Bluemixを試してみる 第2回 · A certain engineer "COMPLEX"</title><meta name="description" content="前回はアプリの下地を作りました。

開発の方法Bluemixでの開発は下記の2つが提供されています。

CF コマンド・ライン・インターフェース
GIT

CF コマンド・ライン・インターフェースCloud Foundry コマンド・ライン・インターフェースの略のようです。どうも、Githubで開発"><meta name="keywords"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="/css/blogcard.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><script src="/js/jquery.js"></script><meta name="generator" content="Hexo 5.1.0"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.webp" style="width:127px;"><h3 title=""><a href="/">A certain engineer &quot;COMPLEX&quot;</a></h3><div class="description"><p>とある技術者の劣等感</p></div></div></div><ul class="social-links"><li><a target="_blank" rel="noopener" href="https://github.com/takuya-takeuchi"><i class="fa fa-github"></i></a></li><li><a target="_blank" rel="noopener" href="https://twitter.com/takuya_takeuchi"><i class="fa fa-twitter-square"></i></a></li><li><a target="_blank" rel="noopener" href="https://www.facebook.com/takuya.takeuchi.sns"><i class="fa fa-facebook-square"></i></a></li></ul><div class="footer"><div class="p"> <span>© 2020 </span><i class="fa fa-star"></i><span> Core</span></div><div class="by_farbox"><span>Powered by </span><a href="https://hexo.io/" target="_blank">Hexo </a><span> & </span><a href="https://github.com/mrcore/hexo-theme-Anatole-Core" target="_blank">Anatole-Core  </a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="search"><div class="text"><input placeholder="検索ワードを入力してください" id="search-text" onkeypress="javascript:search(event)"></div><div class="btn"><a><i class="fa fa-search"></i></a></div></div><div class="nav"><li><a href="/">ホーム</a></li><li><a href="/archives">アーカイブ</a></li><li><a href="/tags">タグ</a></li><li><a href="/about">自己紹介</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>.NETでIBM Bluemixを試してみる 第2回</a></h3></div><div class="post-content"><p><a target="_blank" rel="noopener" href="https://taktak.jp/2016/08/15/1524">前回</a>はアプリの下地を作りました。</p>
<a id="more"></a>
<h1 id="開発の方法"><a href="#開発の方法" class="headerlink" title="開発の方法"></a>開発の方法</h1><p>Bluemixでの開発は下記の2つが提供されています。</p>
<ul>
<li>CF コマンド・ライン・インターフェース</li>
<li>GIT</li>
</ul>
<h3 id="CF-コマンド・ライン・インターフェース"><a href="#CF-コマンド・ライン・インターフェース" class="headerlink" title="CF コマンド・ライン・インターフェース"></a>CF コマンド・ライン・インターフェース</h3><p>Cloud Foundry コマンド・ライン・インターフェースの略のようです。<br>どうも、Githubで開発されているツールの模様。</p>
<div class="blog-card"><div class="hbc-link-wrap"><a class="hbc-link" href="https://github.com/cloudfoundry/cli/releases" target="_blank" rel="nofollow"><div class="hbc-card"><div class="hbc-info"><img class="hbc-favicon" src="http://www.google.com/s2/favicons?domain=github.com"></img><div class="hbc-site-name">GitHub</div></div><div class="hbc-contents"><div class="hbc-thumbnail"><img src="https://opengraph.githubassets.com/d9096286d6749b08f1be9215bc102547c250ec02fc213ef2b30124f24b8deada/cloudfoundry/cli"></img></div><div class="hbc-text"><div class="hbc-title">Releases · cloudfoundry/cli</div><div class="hbc-url">https://github.com/cloudfoundry/cli/releases</div><div class="hbc-description">The official command line client for Cloud Foundry - cloudfoundry/cli</div></div></div></div></a></div></div>

<p>Cloud Foundryは、オープンソースのPaaSソフトウェアとのこと。詳しくは<a target="_blank" rel="noopener" href="https://ja.wikipedia.org/wiki/Cloud_Foundry">Wiki</a>で。</p>
<p>ローカルでこのツールを使って、編集したコードをアップし、デプロイする模様。</p>
<h3 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h3><p>Gitを使って開発をします。<br>説明を見ると、Web上のエディターで編集し、開発を進めていくスタイルのように見えます。</p>
<p>でも、せっかくASP.NETを選択したので、Visual Studioを使いローカルで開発したいです。Visual StudioならGitも統合されているので。</p>
<h1 id="Gitを使う"><a href="#Gitを使う" class="headerlink" title="Gitを使う"></a>Gitを使う</h1><p>というわけでGitを使うための設定です。</p>
<ol>
<li>ダッシュボードに移動し、アプリケーション一覧から、前回作成したアプリをクリックします。</li>
</ol>
<p><a href="../../../../public/2016/08/img_57acad12960fa.png"><img src="../../../../public/2016/08/img_57acad12960fa.png"></a></p>
<ol start="2">
<li>画面右側にある「GITの追加」をクリックします (ここではタイミング的に表示されていませんが..)</li>
</ol>
<p><a href="../../../../public/2016/08/img_57acadbc8829b.png"><img src="../../../../public/2016/08/img_57acadbc8829b.png"></a></p>
<ol start="3">
<li>Gitリポジトリーを作成します。ここの名前はユニークである必要があります。また、この名前はgitリポジトリのurlに当然使われます。例えば、<a target="_blank" rel="noopener" href="https://hub.jazz.net/git/">https://hub.jazz.net/git/</a>&lt;ここの名前&gt;/&lt;アプリの名前&gt;</li>
</ol>
<p><a href="../../../../public/2016/08/img_57acade764c0e.png"><img src="../../../../public/2016/08/img_57acade764c0e.png"></a><br>ご利用条件への同意のチェックは必須</p>
<ol start="4">
<li>作成された?</li>
</ol>
<p><a href="../../../../public/2016/08/img_57acae7baa93a.png"><img src="../../../../public/2016/08/img_57acae7baa93a.png"></a></p>
<p>OK?</p>
<ol start="5">
<li>無慈悲なエラー</li>
</ol>
<p><a href="../../../../public/2016/08/img_57acaead37d44.png"><img src="../../../../public/2016/08/img_57acaead37d44.png"></a><br>どういうことだってばよ…</p>
<ol start="6">
<li>元の画面に戻ったので、もう一度「GITの追加」をクリック。チェックは外して「続行」をクリックしました。</li>
</ol>
<p><a href="../../../../public/2016/08/img_57acaee99034e.png"><img src="../../../../public/2016/08/img_57acaee99034e.png"></a><br>チェックの意味はわかりません</p>
<ol start="7">
<li>今度は成功</li>
</ol>
<p><a href="../../../../public/2016/08/img_57acaf27ab8cf.png"><img src="../../../../public/2016/08/img_57acaf27ab8cf.png"></a><br>本当に大丈夫?</p>
<ol start="8">
<li>右上にGitリポジトリのurlが追加されたました</li>
</ol>
<p><a href="../../../../public/2016/08/img_57acafc0580e0.png"><img src="../../../../public/2016/08/img_57acafc0580e0.png"></a></p>
<p>できたー</p>
<h1 id="Visual-Studioで編集する"><a href="#Visual-Studioで編集する" class="headerlink" title="Visual Studioで編集する"></a>Visual Studioで編集する</h1><p>Gitリポジトリができたので、ローカルにクローンして、コードを編集してみます。<br>クローンする際、認証を求められますが、当然これはIBW BluemixのユーザーIDとパスワードです。</p>
<p>クローンすると、下記のような構成でクローンが完了します。</p>
<p><a href="../../../../public/2016/08/img_57acb1f86ffad.png"><img src="../../../../public/2016/08/img_57acb1f86ffad.png"></a></p>
<p><strong>dotnetstarter.sln</strong>というのがあるので、ダブルクリックして、Visual Studioを起動してみましょう。</p>
<p>が、なんか警告が….<br><a href="../../../../public/2016/08/img_57acb3f147341.png"><img src="../../../../public/2016/08/img_57acb3f147341.png"></a></p>
<p>ふむふむ。SDKが必要なのね。じゃぁ「はい」。</p>
<p><a href="../../../../public/2016/08/img_57acb429e75cd.png"><img src="../../../../public/2016/08/img_57acb429e75cd.png"></a></p>
<p>またエラーだってばよ</p>
<p>どうしろと。<br>わからないので、Google先生に聞いてみる。<br><strong>dnx-clr-win-x86.1.0.0-preview1-002702</strong>がキーワードだが、日本語で検索にヒットしない…..</p>
<p>ということで、英語に変えたら、Stackoverflowで解決策が。</p>
<div class="blog-card"><div class="hbc-link-wrap"><a class="hbc-link" href="http://stackoverflow.com/questions/37931631/dnx-sdk-version-dnx-clr-win-x86-1-0-0-preview1-002702-failed-to-install" target="_blank" rel="nofollow"><div class="hbc-card"><div class="hbc-info"><img class="hbc-favicon" src="http://www.google.com/s2/favicons?domain=stackoverflow.com"></img><div class="hbc-site-name">Stack Overflow</div></div><div class="hbc-contents"><div class="hbc-thumbnail"><img src="https://cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon@2.png?v=73d79a89bded"></img></div><div class="hbc-text"><div class="hbc-title">DNX SDK version &#39;dnx-clr-win-x86.1.0.0-preview1-002702&#39; failed to install</div><div class="hbc-url">http://stackoverflow.com/questions/37931631/dnx-sdk-version-dnx-clr-win-x86-1-0-0-preview1-002702-failed-to-install</div><div class="hbc-description">When I tried to open a .Net core RC2 migrated project in my local, i get the following error message 

---------------------------
Microsoft…</div></div></div></div></a></div></div>

<p>曰く</p>
<blockquote>
<p>This error is message usually an indicator that a previous installation (.NET Core rc1 or some of the rc2 nightlies) of .NET Core Tooling/Framework wasn’t uninstalled. To validate it, go to the “Control Panel” &gt; “Programs and features” and search for “.NET Core” or “Microsoft .NET Core” and uninstall any previous version. Then install the correct .NET Core runtime and tooling version for RC2 and it should work.</p>
</blockquote>
<p>とのこと。<br>つまり、.NET Coreの古いバージョンが入ってるから、コントロールパネルの<strong>プログラムと機能</strong>で、**.NET Core<strong>または</strong>Microsoft .NET Core**を探して、アンインストール。その後、正しいバージョンをインストールすれば動く、とのこと。<br>が、そんなアイテムは見つからない。</p>
<p>もう少し調べると、tnakamura様が<a target="_blank" rel="noopener" href="http://tnakamura.hatenablog.com/entry/2015/07/26/build-an-aspnet5-project-on-windows7">Visual Studio 2015 の ASP.NET 5 プロジェクトを Windows7 でビルドするには PowerShell 3.0 以上が必要だった</a>というそのものズバリな記事を公開していました。<br>記事に従って、関連コンポーネントをインストールし、Windows再起動後、ソリューションを開き直すと、無事に最初のダイアログが表示された後、Visual Studioが開き</p>
<p>ませんでした。<br>まだ何かが足りないので、調べていくと、そもそも.NET coreがインストールされていないのでは？ということに気づき、<a target="_blank" rel="noopener" href="https://go.microsoft.com/fwlink/?LinkId=817245">.NET Core Tooling Preview 2 for Visual Studio 2015</a>をインストールしました。</p>
<p>インストール後、再起動して、再度Visual Studioを開くと、先ほどのダイアログは表示されず<br><a href="../../../../public/2016/08/img_57acf2bad3182.png"><img src="../../../../public/2016/08/img_57acf2bad3182.png"></a><br>すこし違うエラー</p>
<p>というダイアログが。<br>内容は、.NET Core SDK version 1.0.0-preview1-002702がインストールされていないか、C:\Program Files\dotnetの配下に見つからない、という内容です。<br>また、global.jsonに記載された.NET Core SDKをインストールするか、global.jsonの記載内容を更新するべき、とも書いてあります。</p>
<p>インストールは済んだはずなので、global.jsonの内容を書き換えます。</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;projects&quot;: [ &quot;src&quot; ],</span><br><span class="line">    &quot;sdk&quot;: &#123;</span><br><span class="line"><span class="deletion">-        &quot;version&quot;: &quot;1.0.0-preview1-002702&quot;</span></span><br><span class="line"><span class="addition">+        &quot;version&quot;: &quot;1.0.0-preview2-003121&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>にします。versionの文字列は、コマンドプロンプトから</p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dotnet --version</span><br></pre></td></tr></table></figure>

<p>と入力することで、</p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">C:\<span class="title">dotnet</span> --<span class="title">version</span></span></span><br><span class="line"><span class="function">1.0.0-<span class="title">preview2</span>-003121</span></span><br></pre></td></tr></table></figure>

<p>のような文字列を取得できるので、それをそのまま貼り付けるだけです。</p>
<p>これで、エラーがなくなりビルドが通ります。</p>
<h1 id="コミットしてみる"><a href="#コミットしてみる" class="headerlink" title="コミットしてみる"></a>コミットしてみる</h1><p>とりあえず、Blumix側でアプリを動かしてみます。<br>ダッシュボード上で「経路」と記されているurlをクリックすると、Webページが開きます。</p>
<p><a href="../../../../public/2016/08/img_57acf6711621e.png"><img src="../../../../public/2016/08/img_57acf6711621e.png"></a><br>Hello World</p>
<p>これを少し書き換えます。<br>index.htmlの「Hello World」を「こんにちわ」に変更して、コミット、プッシュを行います。</p>
<p>その後、Bluemixのダッシュボードを見ると、アプリが自動的にデプロイを開始し、再起動し始めました。<br>しかしながら、アプリが停止しました。</p>
<p><a href="../../../../public/2016/08/img_57acf7db18541.png"><img src="../../../../public/2016/08/img_57acf7db18541.png"></a></p>
<p>ソースの変更点は、index.htmlとproject.jsonだけです。<br>メッセージを日本語に変えたくらいで落ちるとは思えないので、.NET Core SDKのバージョンがまずいように見えます。</p>
<h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p>動く段階まで来ましたが、ソースの変更で動かなくなりました。次回修正。</p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2016-08-17</span><i class="fa fa-tag"></i><a class="tag" href="/categories/net-framework/" title="net-framework">net-framework </a><a class="tag" href="/categories/netで○○○を試してみる/" title="netで○○○を試してみる">netで○○○を試してみる </a><a class="tag" href="/categories/net-framework/NETで○○○を試してみる/" title=".NETで○○○を試してみる">.NETで○○○を試してみる </a><a class="tag" href="/categories/netで○○○を試してみる/NETでIBM-Bluemixを試してみる/" title=".NETでIBM Bluemixを試してみる">.NETでIBM Bluemixを試してみる </a><a class="tag" href="/categories/paas/" title="paas">paas </a><a class="tag" href="/categories/paas/IBM-Bluemix/" title="IBM Bluemix">IBM Bluemix </a><a class="tag" href="/categories/PaaS/" title="PaaS">PaaS </a><a class="tag" href="/categories/NET-Framework/" title=".NET Framework">.NET Framework </a><span class="leancloud_visitors"></span></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="" onclick="javascript:join_favorite()" ref="sidebar"></a></div><div class="twitter"><a class="fa fa-twitter" target="_blank" rel="noopener" href="http://twitter.com/home?status=,https://takuya-takeuchi.github.io/2016/08/17/1547/,A certain engineer &quot;COMPLEX&quot;,.NETでIBM Bluemixを試してみる 第2回,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2016/08/17/1575/" title=".NETでIBM Bluemixを試してみる 第3回">前へ</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2016/08/15/1524/" title=".NETでIBM Bluemixを試してみる 第1回">次へ</a></li></ul></div></div></div></div></div><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/js/add-bookmark.js"></script><script src="/js/search.js"></script></body></html>