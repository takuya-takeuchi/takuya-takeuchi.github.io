<!DOCTYPE html><html lang="ja-JP"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Core"><title>.NETでIBM Bluemixを試してみる 第4回 -失敗編- · A certain engineer "COMPLEX"</title><meta name="description" content="前回はBluemix上の.NET Coreを更新するべく作業しました(途中)。

Bluemix CLI前回は、Bluemix CLIのインストーラを入手しました。 これをインストールします。


インストール先の指定すらない….



はいはい、再起動再起動
buildpack更新注:この先の処理"><meta name="keywords"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="/css/blogcard.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><script src="/js/jquery.js"></script><meta name="generator" content="Hexo 5.1.0"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h3 title=""><a href="/">A certain engineer &quot;COMPLEX&quot;</a></h3><div class="description"><p>とある技術者の劣等感</p></div></div></div><ul class="social-links"><li><a target="_blank" rel="noopener" href="https://github.com/takuya-takeuchi"><i class="fa fa-github"></i></a></li><li><a target="_blank" rel="noopener" href="https://twitter.com/takuya_takeuchi"><i class="fa fa-twitter-square"></i></a></li><li><a target="_blank" rel="noopener" href="https://www.facebook.com/takuya.takeuchi.sns"><i class="fa fa-facebook-square"></i></a></li></ul><div class="footer"><div class="p"> <span>© 2020 </span><i class="fa fa-star"></i><span> Core</span></div><div class="by_farbox"><span>Powered by </span><a href="https://hexo.io/" target="_blank">Hexo </a><span> & </span><a href="https://github.com/mrcore/hexo-theme-Anatole-Core" target="_blank">Anatole-Core  </a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">ホーム</a></li><li><a href="/archives">アーカイブ</a></li><li><a href="/tags">タグ</a></li><li><a href="/about">自己紹介</a></li><li><a href="/guestbook">メッセージ</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>.NETでIBM Bluemixを試してみる 第4回 -失敗編-</a></h3></div><div class="post-content"><p><a target="_blank" rel="noopener" href="http://wp.me/p7138e-pp">前回</a>はBluemix上の.NET Coreを更新するべく作業しました(途中)。</p>
<a id="more"></a>
<h1 id="Bluemix-CLI"><a href="#Bluemix-CLI" class="headerlink" title="Bluemix CLI"></a>Bluemix CLI</h1><p>前回は、Bluemix CLIのインストーラを入手しました。 これをインストールします。<br><a href="../../../../public/2016/08/img_57adc69b6ec13.png"><img src="../../../../public/2016/08/img_57adc69b6ec13.png"></a></p>
<p><a href="../../../../public/2016/08/img_57adc6a030fda.png"><img src="../../../../public/2016/08/img_57adc6a030fda.png"></a></p>
<p><a href="../../../../public/2016/08/img_57adc6a3edf45.png"><img src="../../../../public/2016/08/img_57adc6a3edf45.png"></a></p>
<p>インストール先の指定すらない….</p>
<p><a href="../../../../public/2016/08/img_57adc6a8d1a24.png"><img src="../../../../public/2016/08/img_57adc6a8d1a24.png"></a></p>
<p><a href="../../../../public/2016/08/img_57adc6b7b2257.png"><img src="../../../../public/2016/08/img_57adc6b7b2257.png"></a></p>
<p><a href="../../../../public/2016/08/img_57adc6bc7a797.png"><img src="../../../../public/2016/08/img_57adc6bc7a797.png"></a></p>
<p>はいはい、再起動再起動</p>
<h1 id="buildpack更新"><a href="#buildpack更新" class="headerlink" title="buildpack更新"></a>buildpack更新</h1><p>注:この先の処理を実施するとBluemixのアプリの環境が壊れます。 ダッシュボードのCF CLIの説明から、Bluemixへの接続がわかりましたので、CF CLIによるbuildpackの更新は下記の流れになります。 管理者権限でコマンドプロンプトを立ち上げ、gitでクローンしたアプリのディレクトリに移動します。 次に下記のコマンドをメモ帳にでも張り付けて、コマンドプロンプトに張り付けます。 (当然文字列は各自環境に応じて置換すること) [code lang=”batch”] bluemix api <a target="_blank" rel="noopener" href="https://api.au-syd.bluemix.net/">https://api.au-syd.bluemix.net</a> bluemix login -u &lt;Bluemix ユーザーID&gt; -o &lt;組織の名前&gt; -s &lt;スペースの名前&gt; &lt;Bluemixのパスワード&gt; cf push &lt;アプリの名前&gt; -b <a target="_blank" rel="noopener" href="https://github.com/cloudfoundry-community/dotnet-core-buildpack.git">https://github.com/cloudfoundry-community/dotnet-core-buildpack.git</a> [/code] これにより、対話をすることなくbuildpackの更新が始まります。 &lt; p style=”margin-top: 400px;”&gt; が、失敗します。 正確には、buildpackの更新はうまくいっている感じです。 [code lang=”batch”] D:\Works\OpenSource\IBM Bluemix\TRY-BLUEMIX-TEST1&gt;bluemix api <a target="_blank" rel="noopener" href="https://api.au-syd.bluemix.net/">https://api.au-syd.bluemix.net</a> ‘cf api <a target="_blank" rel="noopener" href="https://api.au-syd.bluemix.net&/#39;">https://api.au-syd.bluemix.net&#39;</a> を起動しています…<br>Setting api endpoint to <a target="_blank" rel="noopener" href="https://api.au-syd.bluemix.net/">https://api.au-syd.bluemix.net</a>… OK<br>API endpoint: <a target="_blank" rel="noopener" href="https://api.au-syd.bluemix.net/">https://api.au-syd.bluemix.net</a> (API version: 2.54.0) User: <a href="mailto:&#104;&#x6f;&#x67;&#101;&#104;&#x6f;&#x67;&#x65;&#64;&#104;&#111;&#x67;&#101;&#x2e;&#x63;&#x6f;&#x6d;">&#104;&#x6f;&#x67;&#101;&#104;&#x6f;&#x67;&#x65;&#64;&#104;&#111;&#x67;&#101;&#x2e;&#x63;&#x6f;&#x6d;</a> Org: TRY-BLUEMIX Space: SPACE1<br>D:\Works\OpenSource\IBM Bluemix\TRY-BLUEMIX-TEST1&gt;bluemix login -u <a href="mailto:&#104;&#111;&#103;&#x65;&#104;&#111;&#103;&#x65;&#x40;&#104;&#111;&#x67;&#101;&#46;&#99;&#111;&#109;">&#104;&#111;&#103;&#x65;&#104;&#111;&#103;&#x65;&#x40;&#104;&#111;&#x67;&#101;&#46;&#99;&#111;&#109;</a> -o TRY-BLUEMIX -s SPACE1 ‘cf login -u <a href="mailto:&#104;&#111;&#x67;&#x65;&#104;&#111;&#x67;&#x65;&#64;&#x68;&#x6f;&#x67;&#101;&#46;&#99;&#111;&#x6d;">&#104;&#111;&#x67;&#x65;&#104;&#111;&#x67;&#x65;&#64;&#x68;&#x6f;&#x67;&#101;&#46;&#99;&#111;&#x6d;</a> -o TRY-BLUEMIX -s SPACE1’ を起動しています…<br>API endpoint: <a target="_blank" rel="noopener" href="https://api.au-syd.bluemix.net/">https://api.au-syd.bluemix.net</a><br>Password&gt; Authenticating… OK<br>Targeted org TRY-BLUEMIX<br>Targeted space SPACE1<br>API endpoint: <a target="_blank" rel="noopener" href="https://api.au-syd.bluemix.net/">https://api.au-syd.bluemix.net</a> (API version: 2.54.0) User: <a href="mailto:&#104;&#x6f;&#103;&#x65;&#x68;&#x6f;&#103;&#101;&#x40;&#x68;&#111;&#103;&#x65;&#46;&#x63;&#x6f;&#109;">&#104;&#x6f;&#103;&#x65;&#x68;&#x6f;&#103;&#101;&#x40;&#x68;&#111;&#103;&#x65;&#46;&#x63;&#x6f;&#109;</a> Org: TRY-BLUEMIX Space: SPACE1<br>D:\Works\OpenSource\IBM Bluemix\TRY-BLUEMIX-TEST1&gt;cf push TRY-BLUEMIX-TEST1 -b <a target="_blank" rel="noopener" href="https://github.com/cloudfoundry-community/dotnet-core-buildpack.git">https://github.com/cloudfoundry-community/dotnet-core-buildpack.git</a> Using manifest file D:\Works\OpenSource\IBM Bluemix\TRY-BLUEMIX-TEST1\manifest.yml<br>Updating app TRY-BLUEMIX-TEST1 in org TRY-BLUEMIX / space SPACE1 as <a href="mailto:&#104;&#111;&#103;&#101;&#x68;&#x6f;&#103;&#101;&#64;&#104;&#111;&#x67;&#x65;&#x2e;&#x63;&#x6f;&#109;">&#104;&#111;&#103;&#101;&#x68;&#x6f;&#103;&#101;&#64;&#104;&#111;&#x67;&#x65;&#x2e;&#x63;&#x6f;&#109;</a>… OK<br>Using route try-bluemix-test1.au-syd.mybluemix.net Uploading TRY-BLUEMIX-TEST1… Uploading app files from: D:\Works\OpenSource\IBM Bluemix\TRY-BLUEMIX-TEST1 Uploading 33K, 17 files Done uploading OK<br>Stopping app TRY-BLUEMIX-TEST1 in org TRY-BLUEMIX / space SPACE1 as <a href="mailto:&#104;&#x6f;&#x67;&#x65;&#x68;&#111;&#103;&#x65;&#64;&#104;&#111;&#103;&#101;&#x2e;&#x63;&#x6f;&#x6d;">&#104;&#x6f;&#x67;&#x65;&#x68;&#111;&#103;&#x65;&#64;&#104;&#111;&#103;&#101;&#x2e;&#x63;&#x6f;&#x6d;</a>… OK<br>Starting app TRY-BLUEMIX-TEST1 in org TRY-BLUEMIX / space SPACE1 as <a href="mailto:&#x68;&#111;&#x67;&#x65;&#104;&#111;&#x67;&#101;&#64;&#104;&#111;&#103;&#101;&#46;&#x63;&#111;&#x6d;">&#x68;&#111;&#x67;&#x65;&#104;&#111;&#x67;&#101;&#64;&#104;&#111;&#103;&#101;&#46;&#x63;&#111;&#x6d;</a>… —–&gt; Downloaded app package (24K) —–&gt; Downloaded app buildpack cache (138M)<br>Cloning into ‘/tmp/buildpacks/dotnet-core-buildpack’…<br>Submodule ‘compile-extensions’ (<a target="_blank" rel="noopener" href="https://github.com/cloudfoundry-incubator/compile-extensions.git">https://github.com/cloudfoundry-incubator/compile-extensions.git</a>) registered for path ‘compile-extensions’ Cloning into ‘compile-extensions’… Submodule path ‘compile-extensions’: checked out ‘211c02226a2612c8a3b724ebb0983c88b8c95e75’ ASP.NET Core buildpack version: 0.9.0 ASP.NET Core buildpack starting compile —–&gt; Restoring files from buildpack cache Copied 37 files from /tmp/cache/libunwind to /tmp/staged/app Copied 199 files from /tmp/cache/.dotnet to /tmp/staged/app Copied 8120 files from /tmp/cache/.nuget to /tmp/staged/app OK —–&gt; Extracting libunwind libunwind version: 1.1 <a target="_blank" rel="noopener" href="https://github.com/cloudfoundry-community/dotnet-core-buildpack/releases/download/v0.7/libunwind-cflinuxfs2-1.1.tar.gz">https://github.com/cloudfoundry-community/dotnet-core-buildpack/releases/download/v0.7/libunwind-cflinuxfs2-1.1.tar.gz</a> OK —–&gt; Installing Dotnet CLI dotnet version: 1.0.0-preview2-003121 <a target="_blank" rel="noopener" href="https://go.microsoft.com/fwlink/?LinkID=809129">https://go.microsoft.com/fwlink/?LinkID=809129</a> OK —–&gt; Restoring dependencies with Dotnet CLI Welcome to .NET Core! ——————— Learn more about .NET Core @ <a target="_blank" rel="noopener" href="https://aka.ms/dotnet-docs">https://aka.ms/dotnet-docs</a>. Use dotnet –help to see available commands or go to <a target="_blank" rel="noopener" href="https://aka.ms/dotnet-cli-docs">https://aka.ms/dotnet-cli-docs</a>. Telemetry ————– The .NET Core tools collect usage data in order to improve your experience. The data is anonymous and does not include commandline arguments. The data is collected by Microsoft and shared with the community. You can opt out of telemetry by setting a DOTNET_CLI_TELEMETRY_OPTOUT environment variable to 1 using your favorite shell. You can read more about .NET Core tools telemetry @ <a target="_blank" rel="noopener" href="https://aka.ms/dotnet-cli-telemetry">https://aka.ms/dotnet-cli-telemetry</a>. Configuring… ——————- A command is running to initially populate your local package cache, to improve restore speed and enable offline access. This command will take up to a minute to complete and will only happen once. Decompressing 100% 3819 ms Expanding 100% 6266 ms log : Restoring packages for /tmp/staged/app/src/dotnetstarter/project.json… log : Writing lock file to disk. Path: /tmp/staged/app/src/dotnetstarter/project.lock.json log : src/dotnetstarter/project.json log : Restore completed in 2969ms. OK —–&gt; Saving to buildpack cache Copied 1 files from /tmp/staged/app/libunwind to /tmp/cache Copied 203 files from /tmp/staged/app/.dotnet to /tmp/cache Copied 7552 files from /tmp/staged/app/.nuget to /tmp/cache OK ASP.NET Core buildpack is done creating the droplet —–&gt; Uploading droplet (292M)<br>0 of 1 instances running, 1 starting 0 of 1 instances running, 1 starting 0 of 1 instances running, 1 starting 0 of 1 instances running, 1 starting 0 of 1 instances running, 1 down 0 of 1 instances running, 1 down 0 of 1 instances running, 1 starting 0 of 1 instances running, 1 starting 0 of 1 instances running, 1 down 0 of 1 instances running, 1 down 0 of 1 instances running, 1 down 0 of 1 instances running, 1 down 0 of 1 instances running, 1 starting 0 of 1 instances running, 1 starting 0 of 1 instances running, 1 starting 0 of 1 instances running, 1 down 0 of 1 instances running, 1 down Could not fetch instance count: Server error, status code: 400, error code: 170002, message: App has not finished staging Could not fetch instance count: Server error, status code: 400, error code: 170002, message: App has not finished staging Could not fetch instance count: Server error, status code: 400, error code: 170002, message: App has not finished staging Could not fetch instance count: Server error, status code: 400, error code: 170002, message: App has not finished staging Could not fetch instance count: Server error, status code: 400, error code: 170002, message: App has not finished staging [/code] Installing Dotnet CLI dotnet version: 1.0.0-preview2-003121とあり、OKと言っているので、更新は成功したのでしょう。 でも、その後アプリを再起動しても起動に失敗しています。 ダッシュボードを見ると、<br><a href="../../../../public/2016/08/img_57ade144b39bd.png"><img src="../../../../public/2016/08/img_57ade144b39bd.png"></a></p>
<p>一瞬Sad Macに見えた</p>
<p>となって、ASP.NET Coreの名前が消えてしまいました。 どうも環境を壊してしまった模様。 とりあえず、bluemixの環境を変えるのではなく、ローカルを合わせるという方針で開発をしていこうと思います。 (そもそもWindows 7上で開発する意味もあまりない気がしますが….)</p>
<h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p>非常に残念な結果になりました。</p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2016-08-24</span><i class="fa fa-tag"></i><a class="tag" href="/categories/Microsoft/" title="Microsoft">Microsoft </a><a class="tag" href="/categories/Microsoft/NET-Framework/" title=".NET Framework">.NET Framework </a><a class="tag" href="/categories/net-framework/" title="net-framework">net-framework </a><a class="tag" href="/categories/net-framework/NETで○○○を試してみる/" title=".NETで○○○を試してみる">.NETで○○○を試してみる </a><a class="tag" href="/categories/netで○○○を試してみる/" title="netで○○○を試してみる">netで○○○を試してみる </a><a class="tag" href="/categories/netで○○○を試してみる/NETでIBM-Bluemixを試してみる/" title=".NETでIBM Bluemixを試してみる">.NETでIBM Bluemixを試してみる </a><a class="tag" href="/categories/paas/" title="paas">paas </a><a class="tag" href="/categories/paas/IBM-Bluemix/" title="IBM Bluemix">IBM Bluemix </a><a class="tag" href="/categories/PaaS/" title="PaaS">PaaS </a><span class="leancloud_visitors"></span></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="" onclick="javascript:join_favorite()" ref="sidebar"></a></div><div class="twitter"><a class="fa fa-twitter" target="_blank" rel="noopener" href="http://twitter.com/home?status=,https://takuya-takeuchi.github.io/2016/08/24/1583/,A certain engineer &quot;COMPLEX&quot;,.NETでIBM Bluemixを試してみる 第4回 -失敗編-,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2016/08/25/1607/" title="開発メモ その14 OpenCVで機械学習をする際の注意">前へ</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2016/08/21/1603/" title="開発メモ その13 CodeLensを無効にする">次へ</a></li></ul></div></div></div></div></div><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/js/add-bookmark.js"></script></body></html>