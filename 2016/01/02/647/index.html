<!DOCTYPE html><html lang="ja-JP"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Core"><link rel="icon" href="/images/favicon.ico" type="image/x-icon"><title>.NETでNoSQLを試してみる MongoDB編 第3回 · A certain engineer "COMPLEX"</title><meta name="description" content="前回はデータを追加してみました。今回はデータを確認したいと思います。

IntroductionRDBMSとは勝手が違うのがNoSQLですが、思った以上にやっかいです。既存の概念が通じません。というか、データを見たいのに、未だに追加したデータのフィールド名すら見れません。なので、可視化ツールを導入し"><meta name="keywords"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="/css/blogcard.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><script src="/js/jquery.js"></script><meta name="generator" content="Hexo 5.1.0"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.webp" style="width:127px;"><h3 title=""><a href="/">A certain engineer &quot;COMPLEX&quot;</a></h3><div class="description"><p>とある技術者の劣等感</p></div></div></div><ul class="social-links"><li><a target="_blank" rel="noopener" href="https://github.com/takuya-takeuchi"><i class="fa fa-github"></i></a></li><li><a target="_blank" rel="noopener" href="https://twitter.com/takuya_takeuchi"><i class="fa fa-twitter-square"></i></a></li><li><a target="_blank" rel="noopener" href="https://www.facebook.com/takuya.takeuchi.sns"><i class="fa fa-facebook-square"></i></a></li></ul><div class="footer"><div class="p"> <span>© 2020 </span><i class="fa fa-star"></i><span> Core</span></div><div class="by_farbox"><span>Powered by </span><a href="https://hexo.io/" target="_blank">Hexo </a><span> & </span><a href="https://github.com/mrcore/hexo-theme-Anatole-Core" target="_blank">Anatole-Core  </a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="search"><div class="text"><input placeholder="検索ワードを入力してください" id="search-text" onkeypress="javascript:search(event)"></div><div class="btn"><a><i class="fa fa-search"></i></a></div></div><div class="nav"><li><a href="/">ホーム</a></li><li><a href="/archives">アーカイブ</a></li><li><a href="/tags">タグ</a></li><li><a href="/about">自己紹介</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>.NETでNoSQLを試してみる MongoDB編 第3回</a></h3></div><div class="post-content"><p><a target="_blank" rel="noopener" href="https://taktak.jp/2016/01/01/639">前回</a>はデータを追加してみました。今回はデータを確認したいと思います。</p>
<a id="more"></a>
<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>RDBMSとは勝手が違うのがNoSQLですが、思った以上にやっかいです。既存の概念が通じません。<br>というか、データを見たいのに、未だに追加したデータのフィールド名すら見れません。なので、可視化ツールを導入したいと思います。</p>
<p>公式ページ<a target="_blank" rel="noopener" href="https://docs.mongodb.org/ecosystem/tools/administration-interfaces/">Admin UIs</a>によると、たくさんツールがあります。<br><strong>mongo-express</strong> ってのがかっこいいですのでこれにします。<br><strong>MongoHub</strong> が一番いいのですが、MacOX用…インストール先がWindows10なので…いちいちMacにつなげなおしたり、リモートで入りなおすのも面倒だし。</p>
<h1 id="Explanation"><a href="#Explanation" class="headerlink" title="Explanation"></a>Explanation</h1><h2 id="インストール"><a href="#インストール" class="headerlink" title="インストール"></a>インストール</h2><p><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/mongo-express">公式サイト</a> によると、</p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install mongo-express</span><br></pre></td></tr></table></figure>

<p>または</p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g mongo-express</span><br></pre></td></tr></table></figure>

<p>でインストールできるって言っています。</p>
</br>
</br>
</br>

<p><strong>(-ω- ?) npm って何？Linux?</strong></p>
</br>
</br>
</br>

<p>調べました。<br>hashrock様の<a target="_blank" rel="noopener" href="http://qiita.com/hashrock/items/15f4a4961183cfbb2658">フロントエンド開発の３ステップ（npmことはじめ）</a> によれば、</p>
<blockquote>
<p>npm installは、npmリポジトリからライブラリをダウンロードしてくるコマンドです。</p>
</blockquote>
<p>とあります。Nugetみたいなもんか。<br>というか、<strong>Node.js</strong> ってことはJavaScript。そんな環境ない、と思いました。そもそもJavaScriptなんて、ちょっとしか触ったことないです。</p>
<p>でも、ひらめいた。そういや<strong>Visual Studio 2015</strong>インストールするとき、そんなのあった気が。</p>
<p><a href="../../../../public/2015/12/nodejs.png"><img src="../../../../public/2015/12/nodejs.png" alt="nodejs"></a></p>
<p><strong>おるでーーー^o^</strong></p>
<p>素敵やん。</p>
<p>もうちょい調べたところ。npm使うと、グローバルとローカルでパッケージを分けることができるよう。<br>unageanu様の<a target="_blank" rel="noopener" href="http://unageanu.hatenablog.com/entry/20150308/1425779692">npmの基本的な使い方まとめ</a>によれば、</p>
<blockquote>
<ul>
<li><strong>ローカルインストール</strong><ul>
<li>開発中のアプリが依存するライブラリをインストールする場合に利用します。</li>
<li>インストールしたモジュールは、プロジェクト内のみで使えます。<ul>
<li>同じマシンで開発している他のプロジェクトからは使えないので、それぞれで別のバージョンを使用したりできます。</li>
<li>モジュールは、/node_modules にインストールされます。</li>
</ul>
</li>
</ul>
</li>
<li><strong>グローバルインストール</strong><ul>
<li>grunt のような、マシン全体で共有できる<a target="_blank" rel="noopener" href="http://d.hatena.ne.jp/keyword/%A5%C4%A1%BC%A5%EB">ツール</a>やライブラリをインストールする場合はこちら。</li>
<li>インストールしたモジュールは、マシン全体で共有されます。<ul>
<li>試した環境では、 –prefix=/usr/local を指定して<a target="_blank" rel="noopener" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%F3%A5%D1%A5%A4%A5%EB">コンパイル</a>しているので、モジュールは/usr/local/lib/node_modules/ にインストールされました。</li>
<li><a target="_blank" rel="noopener" href="http://d.hatena.ne.jp/keyword/%A5%D1%A1%BC%A5%DF%A5%C3%A5%B7%A5%E7%A5%F3">パーミッション</a>に注意。EACCES エラーが起きる場合は、<a target="_blank" rel="noopener" href="https://docs.npmjs.com/getting-started/fixing-npm-permissions">パーミッションか、インストール先を変更</a>します。</li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<p>とのこと。今回はローカルかな。<br>管理者権限でコマンドプロンプトたちあげて、</p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> c:\Program Files\MongoDB</span><br><span class="line">npm install mongo-express</span><br></pre></td></tr></table></figure>

<p>できたー！、というのは嘘。<br>エラーいっぱい出た。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">npm WARN peerDependencies The peer dependency kerberos@~0.0 included from mongodb-core will no</span><br><span class="line">npm WARN peerDependencies longer be automatically installed to fulfill the peerDependency</span><br><span class="line">npm WARN peerDependencies in npm 3+. Your application will need to depend on it explicitly.</span><br><span class="line">/</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> kerberos@0.0.17 install C:\Program Files\MongoDB\node_modules\mongo-express\node_modules\mongodb\node_modules\kerberos</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> (node-gyp rebuild) || (<span class="built_in">exit</span> 0)</span></span><br><span class="line"></span><br><span class="line">C:\Program Files\MongoDB\node_modules\mongo-express\node_modules\mongodb\node_modules\kerberos&gt;if not defined npm_config_node_gyp (node &quot;C:\Program Files (x86)\nodejs\node_modules\npm\bin\node-gyp-bin\..\..\node_modules\node-gyp\bin\node-gyp.js&quot; rebuild )  else (rebuild)</span><br><span class="line">gyp ERR! configure error</span><br><span class="line">gyp ERR! stack Error: Can&#x27;t find Python executable &quot;python&quot;, you can set the PYTHON env variable.</span><br><span class="line">gyp ERR! stack     at failNoPython (C:\Program Files (x86)\nodejs\node_modules\npm\node_modules\node-gyp\lib\configure.js:103:14)</span><br><span class="line">gyp ERR! stack     at C:\Program Files (x86)\nodejs\node_modules\npm\node_modules\node-gyp\lib\configure.js:64:11</span><br><span class="line">gyp ERR! stack     at FSReqWrap.oncomplete (evalmachine.&lt;anonymous&gt;:95:15)</span><br><span class="line">gyp ERR! System Windows_NT 6.3.9600</span><br><span class="line">gyp ERR! command &quot;node&quot; &quot;C:\Program Files (x86)\nodejs\node_modules\npm\node_modules\node-gyp\bin\node-gyp.js&quot; &quot;rebuild&quot;</span><br><span class="line">gyp ERR! cwd C:\Program Files\MongoDB\node_modules\mongo-express\node_modules\mongodb\node_modules\kerberos</span><br><span class="line">gyp ERR! node -v v0.12.2</span><br><span class="line">gyp ERR! node-gyp -v v1.0.3</span><br><span class="line">gyp ERR! not ok</span><br><span class="line">mongo-express@0.28.8 node_modules\mongo-express</span><br><span class="line">├── basic-auth-connect@1.0.0</span><br><span class="line">├── async@1.4.2</span><br><span class="line">├── consolidate@0.12.1</span><br><span class="line">├── underscore@1.8.3</span><br><span class="line">├── cookie-parser@1.4.0 (cookie-signature@1.0.6, cookie@0.2.2)</span><br><span class="line">├── commander@2.9.0 (graceful-readlink@1.0.1)</span><br><span class="line">├── serve-favicon@2.3.0 (fresh@0.3.0, ms@0.7.1, etag@1.7.0, parseurl@1.3.0)</span><br><span class="line">├── morgan@1.6.1 (on-headers@1.0.1, basic-auth@1.0.3, depd@1.0.1, debug@2.2.0, on-finished@2.3.0)</span><br><span class="line">├── method-override@2.3.5 (methods@1.1.1, vary@1.0.1, parseurl@1.3.0, debug@2.2.0)</span><br><span class="line">├── express-session@1.11.3 (cookie-signature@1.0.6, on-headers@1.0.1, cookie@0.1.3, utils-merge@1.0.0, parseurl@1.3.0, depd@1.0.1, crc@3.3.0, debug@2.2.0, uid-safe@2.0.0)</span><br><span class="line">├── errorhandler@1.4.2 (escape-html@1.0.2, accepts@1.2.13)</span><br><span class="line">├── body-parser@1.14.0 (bytes@2.1.0, content-type@1.0.1, depd@1.1.0, on-finished@2.3.0, debug@2.2.0, http-errors@1.3.1, qs@5.1.0, iconv-lite@0.4.11, type-is@1.6.10, raw-body@2.1.5)</span><br><span class="line">├── express@4.13.3 (escape-html@1.0.2, cookie@0.1.3, merge-descriptors@1.0.0, methods@1.1.1, utils-merge@1.0.0, cookie-signature@1.0.6, array-flatten@1.1.1, fresh@0.3.0, vary@1.0.1, etag@1.7.0, content-type@1.0.1, range-parser@1.0.3, parseurl@1.3.0, path-to-regexp@0.1.7, serve-static@1.10.0, content-disposition@0.5.0, depd@1.0.1, on-finished@2.3.0, finalhandler@0.4.0, debug@2.2.0, qs@4.0.0, proxy-addr@1.0.10, type-is@1.6.10, accepts@1.2.13, send@0.13.0)</span><br><span class="line">├── swig@1.4.2 (optimist@0.6.1, uglify-js@2.4.24)</span><br><span class="line">├── mongodb@2.1.2 (es6-promise@3.0.2, readable-stream@1.0.31, kerberos@0.0.17, mongodb-core@1.2.30)</span><br><span class="line">└── cli-color@1.1.0 (ansi-regex@2.0.0, d@0.1.1, es6-iterator@2.0.0, timers-ext@0.1.0, memoizee@0.3.9, es5-ext@0.10.11)</span><br></pre></td></tr></table></figure>

<p><strong>Python</strong> がいるのか。コマンドプロンプトで <strong>Python –version</strong> っていっても出ないから入ってないのだろう。<br><strong>3.5.1</strong> を<a target="_blank" rel="noopener" href="https://www.python.org/downloads/">公式ページ</a>からダウンロードしてくる。<br>インストール後、一度コマンドプロンプトを再起動 (環境変数の反映) して、一度、</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm -r mongo-express</span><br></pre></td></tr></table></figure>

<p>で削除してから、もう一度実行してみる。<br>でもだめー。<br>どうも、<strong>gyp</strong> とかいうのが、2.5.0以上3.0未満でないとダメって言ってる。面倒な。3.5.1 を削除、<strong>2.7.11</strong> をダウンロードして再インストールする。<br>あ、パスは手動で通すのね、2.7の場合。</p>
<p>次はワーニングとか出たけど、通った。</p>
<p>で、次は設定がいるのね。<a target="_blank" rel="noopener" href="https://github.com/andzdroid/mongo-express">公式ページ</a>に</p>
<blockquote>
<p>To configure: Copy YOUR_PATH/node_modules/mongo-express/config.default.js into a new file called YOUR_PATH/node_modules/mongo-express/config.js.</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">訳: YOUR_PATH&#x2F;node_modules&#x2F;mongo-express&#x2F;config.default.jsをYOUR_PATH&#x2F;node_modules&#x2F;mongo-express&#x2F;config.jsという名前でコピーしろ</span><br></pre></td></tr></table></figure>

<p>とあるので、従う。<br>実行は、</p>
<blockquote>
<p>cd YOUR_PATH/node_modules/mongo-express/ &amp;&amp; node app.js</p>
</blockquote>
<p>とあるので試してみる。たぶん、この&amp;&amp;は間違いだろうと思うが。<br>実行すると、ファイヤーウォールの警告が出るので、適宜許可。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">c:\Program Files\MongoDB\node_modules\mongo-express&gt;node app.js</span><br><span class="line">basicAuth credentials are &quot;admin:pass&quot;, it is recommended you change this in your config.js!</span><br><span class="line">Mongo Express server listening on port 8081 at 0.0.0.0</span><br><span class="line">Database connected</span><br><span class="line">Admin Database connected</span><br></pre></td></tr></table></figure>

<p>どうやら、8081ポートで動いているよう。アクセスしてみる。</p>
<p><a href="../../../../public/2015/12/edge.png"><img src="../../../../public/2015/12/edge.png" alt="認証"></a></p>
<p>認証画面が出るので、先の警告の通りデフォルトのユーザ名とパスを入れてみる。<br>無事に認証が通り、ページが表示されました。OK。</p>
<p><a href="../../../../public/2015/12/express.png"><img src="../../../../public/2015/12/express-1024x701.png" alt="mongo express"></a></p>
<h2 id="データを確認"><a href="#データを確認" class="headerlink" title="データを確認"></a>データを確認</h2><p>ようやくインストールが終わりました。パスワード設定とかは次回に…. 画面左の <strong>View Database</strong> でデータベースが見れるよう。</p>
<p>次のデータベース名が出るのでそこをクリック。<br>すると、よくわからない記号の羅列がでてくるので、そこをクリックすると、見えました。</p>
<p><a href="../../../../public/2015/12/result.png"><img src="../../../../public/2015/12/result-1024x701.png" alt="中身の確認"></a></p>
<p>よしよし。</p>
<h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p>よーやくデータが見えるようになりました。<br>けど、mongo expressは使いやすい感じです。<br>また、思わぬところでnpmを使うことになり、少しレベルアップした感じです。<br>次は、パスワードの設定を。</p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2016-01-02</span><i class="fa fa-tag"></i><a class="tag" href="/categories/Microsoft/" title="Microsoft">Microsoft </a><a class="tag" href="/categories/Microsoft/NET-Framework/" title=".NET Framework">.NET Framework </a><a class="tag" href="/categories/ソフトウェア紹介/" title="ソフトウェア紹介">ソフトウェア紹介 </a><a class="tag" href="/categories/Microsoft/NET-Framework/C/" title="C#">C# </a><a class="tag" href="/categories/net-framework/" title="net-framework">net-framework </a><a class="tag" href="/categories/netで○○○を試してみる/" title="netで○○○を試してみる">netで○○○を試してみる </a><a class="tag" href="/categories/net-framework/NETで○○○を試してみる/" title=".NETで○○○を試してみる">.NETで○○○を試してみる </a><a class="tag" href="/categories/netで○○○を試してみる/NETでNoSQLを試してみる-MongoDB編/" title=".NETでNoSQLを試してみる MongoDB編">.NETでNoSQLを試してみる MongoDB編 </a><a class="tag" href="/categories/nosql/" title="nosql">nosql </a><a class="tag" href="/categories/JavaScript/" title="JavaScript">JavaScript </a><a class="tag" href="/categories/データベース/" title="データベース">データベース </a><a class="tag" href="/categories/nosql/MongoDB/" title="MongoDB">MongoDB </a><a class="tag" href="/categories/mongodb/" title="mongodb">mongodb </a><a class="tag" href="/categories/データベース/NoSQL/" title="NoSQL">NoSQL </a><a class="tag" href="/categories/mongodb/mongo-express/" title="mongo-express">mongo-express </a><a class="tag" href="/categories/javascript/" title="javascript">javascript </a><a class="tag" href="/categories/javascript/Node-js/" title="Node.js">Node.js </a><span class="leancloud_visitors"></span></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="" onclick="javascript:join_favorite()" ref="sidebar"></a></div><div class="twitter"><a class="fa fa-twitter" target="_blank" rel="noopener" href="http://twitter.com/home?status=,https://takuya-takeuchi.github.io/2016/01/02/647/,A certain engineer &quot;COMPLEX&quot;,.NETでNoSQLを試してみる MongoDB編 第3回,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2016/01/03/665/" title=".NETでNoSQLを試してみる MongoDB編 第4回">前へ</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2016/01/01/755/" title=".NETで画像処理を試してみる OpenCVSharp編 第3回">次へ</a></li></ul></div></div></div></div></div><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/js/add-bookmark.js"></script><script src="/js/search.js"></script></body></html>