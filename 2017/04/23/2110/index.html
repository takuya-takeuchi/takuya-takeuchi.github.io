<!DOCTYPE html><html lang="ja-JP"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Core"><link rel="icon" href="/images/favicon.ico" type="image/x-icon"><title>.NET Core 2.0 PreviewとVisual Studio Codeでコンソールアプリをつくる 準備&作成編 · A certain engineer "COMPLEX"</title><meta name="description" content="Introduction2017/04/23現在、**.NET Core 2.0の開発が進められます。そんな **.NET Core 2.0 の Preview を使ってコンソールアプリを作ります。目標は

Visual Studio Codeを使えるようになる
.NET Coreを使えるようになる"><meta name="keywords"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="/css/blogcard.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><script src="/js/jquery.js"></script><meta name="generator" content="Hexo 5.1.0"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.webp" style="width:127px;"><h3 title=""><a href="/">A certain engineer &quot;COMPLEX&quot;</a></h3><div class="description"><p>とある技術者の劣等感</p></div></div></div><ul class="social-links"><li><a target="_blank" rel="noopener" href="https://github.com/takuya-takeuchi"><i class="fa fa-github"></i></a></li><li><a target="_blank" rel="noopener" href="https://twitter.com/takuya_takeuchi"><i class="fa fa-twitter-square"></i></a></li><li><a target="_blank" rel="noopener" href="https://www.facebook.com/takuya.takeuchi.sns"><i class="fa fa-facebook-square"></i></a></li></ul><div class="footer"><div class="p"> <span>© 2020 </span><i class="fa fa-star"></i><span> Core</span></div><div class="by_farbox"><span>Powered by </span><a href="https://hexo.io/" target="_blank">Hexo </a><span> & </span><a href="https://github.com/mrcore/hexo-theme-Anatole-Core" target="_blank">Anatole-Core  </a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="search"><div class="text"><input placeholder="検索ワードを入力してください" id="search-text" onkeypress="javascript:search(event)"></div><div class="btn"><a><i class="fa fa-search"></i></a></div></div><div class="nav"><li><a href="/">ホーム</a></li><li><a href="/archives">アーカイブ</a></li><li><a href="/tags">タグ</a></li><li><a href="/about">自己紹介</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>.NET Core 2.0 PreviewとVisual Studio Codeでコンソールアプリをつくる 準備&amp;作成編</a></h3></div><div class="post-content"><h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>2017/04/23現在、**.NET Core 2.0<strong>の開発が進められます。<br>そんな **.NET Core 2.0</strong> の <strong>Preview</strong> を使ってコンソールアプリを作ります。<br>目標は</p>
<ul>
<li>Visual Studio Codeを使えるようになる</li>
<li>.NET Coreを使えるようになる</li>
<li>Linuxでビルドして実行</li>
</ul>
<p>になります。<br>特にLinuxでの実行が重要になります。<br>開発環境を広げないと、飯の種が無くなってしまいますので。<br>今回は準備と作成を。</p>
<h1 id="NET-Core-2-0-Preview"><a href="#NET-Core-2-0-Preview" class="headerlink" title=".NET Core 2.0 Preview"></a>.NET Core 2.0 Preview</h1><p>まずは.NET Coreを入手します。<br>入手先は下記。</p>
<div class="blog-card"><div class="hbc-link-wrap"><a class="hbc-link" href="https://github.com/dotnet/cli" target="_blank" rel="nofollow"><div class="hbc-card"><div class="hbc-info"><img class="hbc-favicon" src="http://www.google.com/s2/favicons?domain=github.com"></img><div class="hbc-site-name">GitHub</div></div><div class="hbc-contents"><div class="hbc-thumbnail"><img src="https://opengraph.githubassets.com/1b6a43bae4a6fccae4e7a1fb404ee5e38acda6cd6b8934681dca911244702bb3/dotnet/cli"></img></div><div class="hbc-text"><div class="hbc-title">GitHub - dotnet/cli: The .NET Core command-line (CLI) tools, used for building .NET Core apps and libraries through your development flow (compiling, NuGet package management, running, testing, ...).</div><div class="hbc-url">https://github.com/dotnet/cli</div><div class="hbc-description">The .NET Core command-line (CLI) tools, used for building .NET Core apps and libraries through your development flow (compiling, NuGet packa…</div></div></div></div></a></div></div>

<p>上のページで、<strong>Installers and Binaries</strong>ってセクションから環境に応じたものを入手します。<br>今回は、zipで入手します。Previewなんて先行版をインストーラでインストールしたくありません(ｷﾘｯ)</p>
<p>これは適当な場所に置いておきます。今回は <strong>D:\Works\Lib\Microsoft.NET Core CLI\2.0.0-preview2-005840\bin</strong> に展開します。<br>パスを通すかはお好みで。</p>
<h1 id="Visual-Studio-Code"><a href="#Visual-Studio-Code" class="headerlink" title="Visual Studio Code"></a>Visual Studio Code</h1><h2 id="入手"><a href="#入手" class="headerlink" title="入手"></a>入手</h2><p>ダウンロード先は下記です。以上。</p>
<div class="blog-card"><div class="hbc-link-wrap"><a class="hbc-link" href="https://code.visualstudio.com/download" target="_blank" rel="nofollow"><div class="hbc-card"><div class="hbc-info"><img class="hbc-favicon" src="http://www.google.com/s2/favicons?domain=code.visualstudio.com"></img><div class="hbc-site-name">code.visualstudio.com</div></div><div class="hbc-contents"><div class="hbc-thumbnail"><img src="https://code.visualstudio.com/opengraphimg/opengraph-home.png"></img></div><div class="hbc-text"><div class="hbc-title">Download Visual Studio Code - Mac, Linux, Windows</div><div class="hbc-url">https://code.visualstudio.com/download</div><div class="hbc-description">Visual Studio Code is free and available on your favorite platform - Linux, macOS, and Windows.  Download Visual Studio Code to experience a…</div></div></div></div></a></div></div>

<h2 id="C-Extension"><a href="#C-Extension" class="headerlink" title="C# Extension"></a>C# Extension</h2><p>Visual Studio Code起動後、拡張機能を導入します。<br>C#はMicrosoftにおける第一級のプログラミング言語ですが、Visual Studio Codeは、クロスプラットフォームで動作するので、そのあたりの特別扱いはできなかった、あるいはIDEではなくエディタという位置づけなので、言語対応は全て拡張機能で追加しましょう、なスタンスのご様子。面倒。</p>
<p><a href="../../../../public/2017/04/052c09a990c125f192abcb54c1fb45fd.png"><img src="../../../../public/2017/04/052c09a990c125f192abcb54c1fb45fd-1024x768.png"></a></p>
<h1 id="コーディング"><a href="#コーディング" class="headerlink" title="コーディング"></a>コーディング</h1><p>まず、プロジェクトフォルダを作成します。<br>Visual Studio Codeでは、プロジェクトという概念がありません。エディタだからですかね。<br>あるのは、開いたフォルダが起点となるという概念だけです。</p>
<p>今回は<strong>D:\Works\temp\corecli</strong> をプロジェクトフォルダにします。</p>
<p>プロジェクトの作成は、先ほど入手した.NET Coreを使います。</p>
<p>まず、コマンドラインでプロジェクトフォルダに移動します。<br>続いて、.NET Coreに含まれる <strong>dotnet.exe</strong> を–helpをつけて呼び出します。</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">D:\<span class="title">Works</span>\<span class="title">temp</span>\<span class="title">corecli</span>&gt;&quot;<span class="title">D</span>:\<span class="title">Works</span>\<span class="title">Lib</span>\<span class="title">Microsoft</span>\.<span class="title">NET</span> <span class="title">Core</span> <span class="title">CLI</span>\2.0.0-<span class="title">preview2</span>-005840\<span class="title">bin</span>\<span class="title">dotnet.exe</span>&quot; --<span class="title">help</span></span></span><br><span class="line"><span class="function">.<span class="title">NET</span> <span class="title">Command</span> <span class="title">Line</span> <span class="title">Tools</span> (2.0.0-<span class="title">preview2</span>-005840)</span></span><br><span class="line"><span class="function"><span class="title">Usage</span>: <span class="title">dotnet</span> [<span class="title">host</span>-<span class="title">options</span>] [<span class="title">command</span>] [<span class="title">arguments</span>] [<span class="title">common</span>-<span class="title">options</span>]</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Arguments</span>:</span></span><br><span class="line"><span class="function">  [<span class="title">command</span>]             <span class="title">The</span> <span class="title">command</span> <span class="title">to</span> <span class="title">execute</span></span></span><br><span class="line"><span class="function">  [<span class="title">arguments</span>]           <span class="title">Arguments</span> <span class="title">to</span> <span class="title">pass</span> <span class="title">to</span> <span class="title">the</span> <span class="title">command</span></span></span><br><span class="line"><span class="function">  [<span class="title">host</span>-<span class="title">options</span>]        <span class="title">Options</span> <span class="title">specific</span> <span class="title">to</span> <span class="title">dotnet</span> (<span class="title">host</span>)</span></span><br><span class="line"><span class="function">  [<span class="title">common</span>-<span class="title">options</span>]      <span class="title">Options</span> <span class="title">common</span> <span class="title">to</span> <span class="title">all</span> <span class="title">commands</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Common</span> <span class="title">options</span>:</span></span><br><span class="line"><span class="function">  -<span class="title">v</span>|--<span class="title">verbose</span>          <span class="title">Enable</span> <span class="title">verbose</span> <span class="title">output</span></span></span><br><span class="line"><span class="function">  -<span class="title">h</span>|--<span class="title">help</span>             <span class="title">Show</span> <span class="title">help</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Host</span> <span class="title">options</span> (<span class="title">passed</span> <span class="title">before</span> <span class="title">the</span> <span class="title">command</span>):</span></span><br><span class="line"><span class="function">  -<span class="title">d</span>|--<span class="title">diagnostics</span>      <span class="title">Enable</span> <span class="title">diagnostic</span> <span class="title">output</span></span></span><br><span class="line"><span class="function">  --<span class="title">version</span>             <span class="title">Display</span> .<span class="title">NET</span> <span class="title">CLI</span> <span class="title">Version</span> <span class="title">Number</span></span></span><br><span class="line"><span class="function">  --<span class="title">info</span>                <span class="title">Display</span> .<span class="title">NET</span> <span class="title">CLI</span> <span class="title">Info</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Commands</span>:</span></span><br><span class="line"><span class="function">  <span class="title">new</span>           <span class="title">Initialize</span> .<span class="title">NET</span> <span class="title">projects</span>.</span></span><br><span class="line"><span class="function">  <span class="title">restore</span>       <span class="title">Restore</span> <span class="title">dependencies</span> <span class="title">specified</span> <span class="title">in</span> <span class="title">the</span> .<span class="title">NET</span> <span class="title">project</span>.</span></span><br><span class="line"><span class="function">  <span class="title">build</span>         <span class="title">Builds</span> <span class="title">a</span> .<span class="title">NET</span> <span class="title">project</span>.</span></span><br><span class="line"><span class="function">  <span class="title">publish</span>       <span class="title">Publishes</span> <span class="title">a</span> .<span class="title">NET</span> <span class="title">project</span> <span class="title">for</span> <span class="title">deployment</span> (<span class="title">including</span> <span class="title">the</span> <span class="title">runtime</span>).</span></span><br><span class="line"><span class="function">  <span class="title">run</span>           <span class="title">Compiles</span> <span class="title">and</span> <span class="title">immediately</span> <span class="title">executes</span> <span class="title">a</span> .<span class="title">NET</span> <span class="title">project</span>.</span></span><br><span class="line"><span class="function">  <span class="title">test</span>          <span class="title">Runs</span> <span class="title">unit</span> <span class="title">tests</span> <span class="title">using</span> <span class="title">the</span> <span class="title">test</span> <span class="title">runner</span> <span class="title">specified</span> <span class="title">in</span> <span class="title">the</span> <span class="title">project</span>.</span></span><br><span class="line"><span class="function">  <span class="title">pack</span>          <span class="title">Creates</span> <span class="title">a</span> <span class="title">NuGet</span> <span class="title">package</span>.</span></span><br><span class="line"><span class="function">  <span class="title">migrate</span>       <span class="title">Migrates</span> <span class="title">a</span> <span class="title">project.json</span> <span class="title">based</span> <span class="title">project</span> <span class="title">to</span> <span class="title">a</span> <span class="title">msbuild</span> <span class="title">based</span> <span class="title">project</span>.</span></span><br><span class="line"><span class="function">  <span class="title">clean</span>         <span class="title">Clean</span> <span class="title">build</span> <span class="title">output</span>(<span class="title">s</span>).</span></span><br><span class="line"><span class="function">  <span class="title">sln</span>           <span class="title">Modify</span> <span class="title">solution</span> (<span class="title">SLN</span>) <span class="title">files</span>.</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Project</span> <span class="title">modification</span> <span class="title">commands</span>:</span></span><br><span class="line"><span class="function">  <span class="title">add</span>           <span class="title">Add</span> <span class="title">items</span> <span class="title">to</span> <span class="title">the</span> <span class="title">project</span>.</span></span><br><span class="line"><span class="function">  <span class="title">remove</span>        <span class="title">Remove</span> <span class="title">items</span> <span class="title">from</span> <span class="title">the</span> <span class="title">project</span>.</span></span><br><span class="line"><span class="function">  <span class="title">list</span>          <span class="title">List</span> <span class="title">items</span> <span class="title">in</span> <span class="title">the</span> <span class="title">project</span>.</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Advanced</span> <span class="title">Commands</span>:</span></span><br><span class="line"><span class="function">  <span class="title">nuget</span>         <span class="title">Provides</span> <span class="title">additional</span> <span class="title">NuGet</span> <span class="title">commands</span>.</span></span><br><span class="line"><span class="function">  <span class="title">msbuild</span>       <span class="title">Runs</span> <span class="title">Microsoft</span> <span class="title">Build</span> <span class="title">Engine</span> (<span class="title">MSBuild</span>).</span></span><br><span class="line"><span class="function">  <span class="title">vstest</span>        <span class="title">Runs</span> <span class="title">Microsoft</span> <span class="title">Test</span> <span class="title">Execution</span> <span class="title">Command</span> <span class="title">Line</span> <span class="title">Tool</span>.</span></span><br></pre></td></tr></table></figure>

<p>色々ありますが、<strong>new</strong> でプロジェクトを初期化することがわかります。<br>ではnewをつけて呼び出します。</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">D:\<span class="title">Works</span>\<span class="title">temp</span>\<span class="title">corecli</span>&amp;<span class="title">gt</span>;&quot;<span class="title">D</span>:\<span class="title">Works</span>\<span class="title">Lib</span>\<span class="title">Microsoft</span>\.<span class="title">NET</span> <span class="title">Core</span> <span class="title">CLI</span>\2.0.0-<span class="title">preview2</span>-005840\<span class="title">bin</span>\<span class="title">dotnet.exe</span>&quot; <span class="title">new</span></span></span><br><span class="line"><span class="function"><span class="title">Template</span> <span class="title">Instantiation</span> <span class="title">Commands</span> <span class="title">for</span> .<span class="title">NET</span> <span class="title">Core</span> <span class="title">CLI</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Usage</span>: <span class="title">new</span> [<span class="title">options</span>]</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Options</span>:</span></span><br><span class="line"><span class="function">  -<span class="title">h</span>, --<span class="title">help</span>          <span class="title">Displays</span> <span class="title">help</span> <span class="title">for</span> <span class="title">this</span> <span class="title">command</span>.</span></span><br><span class="line"><span class="function">  -<span class="title">l</span>, --<span class="title">list</span>          <span class="title">Lists</span> <span class="title">templates</span> <span class="title">containing</span> <span class="title">the</span> <span class="title">specified</span> <span class="title">name</span>. <span class="title">If</span> <span class="title">no</span> <span class="title">name</span> <span class="title">is</span> <span class="title">specified</span>, <span class="title">lists</span> <span class="title">all</span> <span class="title">templates</span>.</span></span><br><span class="line"><span class="function">  -<span class="title">n</span>, --<span class="title">name</span>          <span class="title">The</span> <span class="title">name</span> <span class="title">for</span> <span class="title">the</span> <span class="title">output</span> <span class="title">being</span> <span class="title">created</span>. <span class="title">If</span> <span class="title">no</span> <span class="title">name</span> <span class="title">is</span> <span class="title">specified</span>, <span class="title">the</span> <span class="title">name</span> <span class="title">of</span> <span class="title">the</span> <span class="title">current</span> <span class="title">directory</span> <span class="title">is</span> <span class="title">used</span>.</span></span><br><span class="line"><span class="function">  -<span class="title">o</span>, --<span class="title">output</span>        <span class="title">Location</span> <span class="title">to</span> <span class="title">place</span> <span class="title">the</span> <span class="title">generated</span> <span class="title">output</span>.</span></span><br><span class="line"><span class="function">  -<span class="title">i</span>, --<span class="title">install</span>       <span class="title">Installs</span> <span class="title">a</span> <span class="title">source</span> <span class="title">or</span> <span class="title">a</span> <span class="title">template</span> <span class="title">pack</span>.</span></span><br><span class="line"><span class="function">  -<span class="title">u</span>, --<span class="title">uninstall</span>     <span class="title">Uninstalls</span> <span class="title">a</span> <span class="title">source</span> <span class="title">or</span> <span class="title">a</span> <span class="title">template</span> <span class="title">pack</span>.</span></span><br><span class="line"><span class="function">  --<span class="title">type</span>              <span class="title">Shows</span> <span class="title">a</span> <span class="title">subset</span> <span class="title">of</span> <span class="title">the</span> <span class="title">available</span> <span class="title">templates</span>. <span class="title">Valid</span> <span class="title">values</span> <span class="title">are</span> &quot;<span class="title">project</span>&quot;, &quot;<span class="title">item</span>&quot; <span class="title">or</span> &quot;<span class="title">other</span>&quot;.</span></span><br><span class="line"><span class="function">  --<span class="title">force</span>             <span class="title">Forces</span> <span class="title">content</span> <span class="title">to</span> <span class="title">be</span> <span class="title">generated</span> <span class="title">even</span> <span class="title">if</span> <span class="title">it</span> <span class="title">would</span> <span class="title">change</span> <span class="title">existing</span> <span class="title">files</span>.</span></span><br><span class="line"><span class="function">  -<span class="title">lang</span>, --<span class="title">language</span>   <span class="title">Specifies</span> <span class="title">the</span> <span class="title">language</span> <span class="title">of</span> <span class="title">the</span> <span class="title">template</span> <span class="title">to</span> <span class="title">create</span>.</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Templates</span>                 <span class="title">Short</span> <span class="title">Name</span>       <span class="title">Language</span>      <span class="title">Tags</span></span></span><br><span class="line"><span class="function">-----------------------------------------------------------------------</span></span><br><span class="line"><span class="function"><span class="title">Console</span> <span class="title">Application</span>       <span class="title">console</span>          [<span class="title">C</span>#], <span class="title">F</span>#      <span class="title">Common</span>/<span class="title">Console</span></span></span><br><span class="line"><span class="function"><span class="title">Class</span> <span class="title">library</span>             <span class="title">classlib</span>         [<span class="title">C</span>#], <span class="title">F</span>#      <span class="title">Common</span>/<span class="title">Library</span></span></span><br><span class="line"><span class="function"><span class="title">Unit</span> <span class="title">Test</span> <span class="title">Project</span>         <span class="title">mstest</span>           [<span class="title">C</span>#], <span class="title">F</span>#      <span class="title">Test</span>/<span class="title">MSTest</span></span></span><br><span class="line"><span class="function"><span class="title">xUnit</span> <span class="title">Test</span> <span class="title">Project</span>        <span class="title">xunit</span>            [<span class="title">C</span>#], <span class="title">F</span>#      <span class="title">Test</span>/<span class="title">xUnit</span></span></span><br><span class="line"><span class="function"><span class="title">ASP.NET</span> <span class="title">Core</span> <span class="title">Empty</span>        <span class="title">web</span>              [<span class="title">C</span>#]          <span class="title">Web</span>/<span class="title">Empty</span></span></span><br><span class="line"><span class="function"><span class="title">ASP.NET</span> <span class="title">Core</span> <span class="title">Web</span> <span class="title">App</span>      <span class="title">mvc</span>              [<span class="title">C</span>#], <span class="title">F</span>#      <span class="title">Web</span>/<span class="title">MVC</span></span></span><br><span class="line"><span class="function"><span class="title">ASP.NET</span> <span class="title">Core</span> <span class="title">Web</span> <span class="title">API</span>      <span class="title">webapi</span>           [<span class="title">C</span>#]          <span class="title">Web</span>/<span class="title">WebAPI</span></span></span><br><span class="line"><span class="function"><span class="title">Nuget</span> <span class="title">Config</span>              <span class="title">nugetconfig</span>                    <span class="title">Config</span></span></span><br><span class="line"><span class="function"><span class="title">Web</span> <span class="title">Config</span>                <span class="title">webconfig</span>                      <span class="title">Config</span></span></span><br><span class="line"><span class="function"><span class="title">Solution</span> <span class="title">File</span>             <span class="title">sln</span>                            <span class="title">Solution</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Examples</span>:</span></span><br><span class="line"><span class="function">    <span class="title">dotnet</span> <span class="title">new</span> <span class="title">mvc</span> --<span class="title">framework</span> <span class="title">netcoreapp2</span>.0 --<span class="title">auth</span> <span class="title">Individual</span></span></span><br><span class="line"><span class="function">    <span class="title">dotnet</span> <span class="title">new</span> <span class="title">console</span> --<span class="title">framework</span> <span class="title">netcoreapp2</span>.0</span></span><br><span class="line"><span class="function">    <span class="title">dotnet</span> <span class="title">new</span> --<span class="title">help</span></span></span><br></pre></td></tr></table></figure>

<p>コンソールアプリは、<strong>console</strong>をつける模様。<br>最後に、<strong>new console</strong>を付けて実行します。</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">D:\<span class="title">Works</span>\<span class="title">temp</span>\<span class="title">corecli</span>&amp;<span class="title">amp</span>;<span class="title">gt</span>;&quot;<span class="title">D</span>:\<span class="title">Works</span>\<span class="title">Lib</span>\<span class="title">Microsoft</span>\.<span class="title">NET</span> <span class="title">Core</span> <span class="title">CLI</span>\2.0.0-<span class="title">preview2</span>-005840\<span class="title">bin</span>\<span class="title">dotnet.exe</span>&quot; <span class="title">new</span> <span class="title">console</span></span></span><br><span class="line"><span class="function"><span class="title">The</span> <span class="title">template</span> &quot;<span class="title">Console</span> <span class="title">Application</span>&quot; <span class="title">was</span> <span class="title">created</span> <span class="title">successfully</span>.</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Processing</span> <span class="title">post</span>-<span class="title">creation</span> <span class="title">actions</span>...</span></span><br><span class="line"><span class="function"><span class="title">Running</span> &#x27;<span class="title">dotnet</span> <span class="title">restore</span>&#x27; <span class="title">on</span> <span class="title">D</span>:\<span class="title">Works</span>\<span class="title">temp</span>\<span class="title">corecli</span>\<span class="title">corecli.csproj</span>...</span></span><br><span class="line"><span class="function"><span class="title">Restore</span> <span class="title">succeeded</span>.</span></span><br></pre></td></tr></table></figure>

<p>そうすると、プロジェクトフォルダに、</p>
<ul>
<li>obj</li>
<li>corecli.csproj</li>
<li>NuGet.config</li>
<li>Program.cs</li>
</ul>
<p>が作成されます。<br>csprojを見ると、Visual Studioを思い出しますが、中身は少し違います。<br>ファイルへの参照がない。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Project</span> <span class="attr">Sdk</span>=<span class="string">&quot;Microsoft.NET.Sdk&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">PropertyGroup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">OutputType</span>&gt;</span>Exe<span class="tag">&lt;/<span class="name">OutputType</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TargetFramework</span>&gt;</span>netcoreapp2.0<span class="tag">&lt;/<span class="name">TargetFramework</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">PropertyGroup</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">Project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>次に、このフォルダをVisual Studio Codeで開きます。メニューに <strong>フォルダーを開く</strong> がありますので、そこから開きます。</p>
<p><a href="../../../../public/2017/04/76279b2073aaa126655eb5579cb096a1.png"><img src="../../../../public/2017/04/76279b2073aaa126655eb5579cb096a1-1024x768.png"></a></p>
<p>すると、<strong>Required assets to build and debug are missing from ‘corecli’. Add them?</strong> と聞かれます。</p>
<p><a href="../../../../public/2017/04/a956c2fecc47c357ed5ade8f7d4668e2.png"><img src="../../../../public/2017/04/a956c2fecc47c357ed5ade8f7d4668e2-1024x768.png"></a></p>
<p>Yesと応えると、プロジェクトに</p>
<ul>
<li>.vscode\tasks.json</li>
<li>.vscode\launch.json</li>
</ul>
<p>が追加されます。<br>同時に、<strong>There are unresolved dependencies from ‘corecli.csproj’. Please execute the restore command to continue.</strong> と聞かれますが、Restoreを選んでも下記のエラーになります。</p>
<p><code>error: Invalid input &#39;d:\Works\temp\corecli\corecli.csproj&#39;. The file type was not recognized. Done: 1.</code></p>
<p>なので、これは諦めます。</p>
<h1 id="デバッグ-amp-実行"><a href="#デバッグ-amp-実行" class="headerlink" title="デバッグ&amp;実行"></a>デバッグ&amp;実行</h1><p>現時点で、Program.csには、<strong>Hello World!</strong> と表示するコードが書かれています。<br>これを実行します。<br><strong>Console.WriteLine</strong> にF9でブレークポイントを置き、F5で実行してみます。このあたりはVisual Studioと同じで助かります。</p>
<p>実行すると、エラーがでます。</p>
<p><a href="../../../../public/2017/04/7d168e1a70d55585dc1f55ad068700cd.png"><img src="../../../../public/2017/04/7d168e1a70d55585dc1f55ad068700cd-1024x768.png"></a></p>
<p><strong>問題を表示する</strong>とあるのでクリックしますが、</p>
<p><a href="../../../../public/2017/04/ae09d27d5975a106b62397b00925376d.png"><img src="../../../../public/2017/04/ae09d27d5975a106b62397b00925376d-1024x768.png"></a> </p>
<p><strong>現時点で問題はワークスペースで検出されていません。</strong> と言われます。意味がわかりません。<br>仕方ないので、もう一度実行し、今度は<strong>このままデバッグを続ける</strong> をクリックします。<br>すると、今度は下記のメッセージが表示されました。</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">-------------------------------------------------------------------</span><br><span class="line">You may only use the Microsoft .<span class="built_in">NET</span> Core Debugger (vsdbg) with</span><br><span class="line">Visual Studio Code, Visual Studio or Visual Studio <span class="keyword">for</span> Mac software</span><br><span class="line">to <span class="built_in">help</span> you develop and test your applications.</span><br><span class="line">-------------------------------------------------------------------</span><br><span class="line">The specified framework &#x27;Microsoft.NETCore.App&#x27;, version &#x27;<span class="number">2</span>.<span class="number">0</span>.<span class="number">0</span>-preview1-<span class="number">002061</span>-<span class="number">00</span>&#x27; was <span class="keyword">not</span> found.</span><br><span class="line"></span><br><span class="line">  - Check application dependencies and target a framework version installed <span class="built_in">at</span>:</span><br><span class="line"></span><br><span class="line"><span class="function">      C:\<span class="title">Program</span> <span class="title">Files</span>\<span class="title">dotnet</span>\<span class="title">shared</span>\<span class="title">Microsoft.NETCore.App</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">  - <span class="title">The</span> <span class="title">following</span> <span class="title">versions</span> <span class="title">are</span> <span class="title">installed</span>:</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">      1.0.0</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">  - <span class="title">Alternatively</span>, <span class="title">install</span> <span class="title">the</span> <span class="title">framework</span> <span class="title">version</span> &#x27;2.0.0-<span class="title">preview1</span>-002061-00&#x27;.</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">The</span> <span class="title">target</span> <span class="title">process</span> <span class="title">exited</span> <span class="title">without</span> <span class="title">raising</span> <span class="title">a</span> <span class="title">CoreCLR</span> <span class="title">started</span> <span class="title">event</span>. <span class="title">Ensure</span> <span class="title">that</span> <span class="title">the</span> <span class="title">target</span> <span class="title">process</span> <span class="title">is</span> <span class="title">configured</span> <span class="title">to</span> <span class="title">use</span> .<span class="title">NET</span> <span class="title">Core</span>. <span class="title">This</span> <span class="title">may</span> <span class="title">be</span> <span class="title">expected</span> <span class="title">if</span> <span class="title">the</span> <span class="title">target</span> <span class="title">process</span> <span class="title">did</span> <span class="title">not</span> <span class="title">run</span> <span class="title">on</span> .<span class="title">NET</span> <span class="title">Core</span>.</span></span><br><span class="line"><span class="function"><span class="title">The</span> <span class="title">program</span> &#x27;[23568] <span class="title">corecli.dll</span>&#x27; <span class="title">has</span> <span class="title">exited</span> <span class="title">with</span> <span class="title">code</span> -2147450749 (0<span class="title">x80008083</span>).</span></span><br></pre></td></tr></table></figure>

<p>どうも、依存関係が見つからないご様子。<br>なので、.NET Core 2.0のフォルダにある、<strong>shared\Microsoft.NETCore.App\2.0.0-preview1-002061-00</strong> を <strong>C:\Program Files\dotnet\shared\Microsoft.NETCore.App</strong> にコピーします。<br>その後、もう一度F5実行し、<strong>このままデバッグを続ける</strong> をクリックします。<br>今度は、実行に成功し、ブレークポイントに停止しました。</p>
<p><a href="../../../../public/2017/04/bbed7d4da07f33b2a5fe5c237d39b2aa.png"><img src="../../../../public/2017/04/bbed7d4da07f33b2a5fe5c237d39b2aa-1024x768.png"></a></p>
<p>カーソルを次に進めると、下のコンソールに<strong>Hello World!</strong> が表示されます。<br>少し手こずりましたが、何とか動きました。</p>
<p>あと、実行アセンブリは、dllが拡張子なのね…</p>
<h1 id="コンソールからビルド-amp-実行"><a href="#コンソールからビルド-amp-実行" class="headerlink" title="コンソールからビルド&amp;実行"></a>コンソールからビルド&amp;実行</h1><p>Visual Studio Codeから実行しましたが、dotnet.exeからもビルドしてみます。<br>同じようにカレントをプロジェクトフォルダに移動したコマンドプロンプトから下記でビルドします。</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">D:\<span class="title">Works</span>\<span class="title">temp</span>\<span class="title">corecli</span>&gt;&quot;<span class="title">D</span>:\<span class="title">Works</span>\<span class="title">Lib</span>\<span class="title">Microsoft</span>\.<span class="title">NET</span> <span class="title">Core</span> <span class="title">CLI</span>\2.0.0-<span class="title">preview2</span>-005840\<span class="title">bin</span>\<span class="title">dotnet.exe</span>&quot; <span class="title">build</span></span></span><br><span class="line"><span class="function"><span class="title">Microsoft</span> (<span class="title">R</span>) <span class="title">Build</span> <span class="title">Engine</span> <span class="title">version</span> 15.2.93.5465</span></span><br><span class="line"><span class="function"><span class="title">Copyright</span> (<span class="title">C</span>) <span class="title">Microsoft</span> <span class="title">Corporation</span>. <span class="title">All</span> <span class="title">rights</span> <span class="title">reserved</span>.</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">  <span class="title">corecli</span> -&gt; <span class="title">D</span>:\<span class="title">Works</span>\<span class="title">temp</span>\<span class="title">corecli</span>\<span class="title">bin</span>\<span class="title">Debug</span>\<span class="title">netcoreapp2</span>.0\<span class="title">corecli.dll</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Build</span> <span class="title">succeeded</span>.</span></span><br><span class="line"><span class="function">    0 <span class="title">Warning</span>(<span class="title">s</span>)</span></span><br><span class="line"><span class="function">    0 <span class="title">Error</span>(<span class="title">s</span>)</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Time</span> <span class="title">Elapsed</span> 00:00:02.92</span></span><br></pre></td></tr></table></figure>

<p>続いて実行します。</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">D:\<span class="title">Works</span>\<span class="title">temp</span>\<span class="title">corecli</span>&gt;&quot;<span class="title">D</span>:\<span class="title">Works</span>\<span class="title">Lib</span>\<span class="title">Microsoft</span>\.<span class="title">NET</span> <span class="title">Core</span> <span class="title">CLI</span>\2.0.0-<span class="title">preview2</span>-005840\<span class="title">bin</span>\<span class="title">dotnet.exe</span>&quot; <span class="title">run</span></span></span><br><span class="line"><span class="function"><span class="title">Hello</span> <span class="title">World</span>!</span></span><br></pre></td></tr></table></figure>

<p>問題なく実行できました。<br>これならLinuxでも実行できそうです。</p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2017-04-23</span><i class="fa fa-tag"></i><a class="tag" href="/categories/Microsoft/" title="Microsoft">Microsoft </a><a class="tag" href="/categories/Visual-Studio-Code/" title="Visual Studio Code">Visual Studio Code </a><a class="tag" href="/categories/NET-Core/" title=".NET Core">.NET Core </a><span class="leancloud_visitors"></span></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="" onclick="javascript:join_favorite()" ref="sidebar"></a></div><div class="twitter"><a class="fa fa-twitter" target="_blank" rel="noopener" href="http://twitter.com/home?status=,https://takuya-takeuchi.github.io/2017/04/23/2110/,A certain engineer &quot;COMPLEX&quot;,.NET Core 2.0 PreviewとVisual Studio Codeでコンソールアプリをつくる 準備&amp;作成編,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2017/04/23/2148/" title="ディープラーニング Caffe その3 環境構築 with GPU">前へ</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2017/04/22/2104/" title="開発メモ その53 DockerのベースOSについて">次へ</a></li></ul></div></div></div></div></div><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/js/add-bookmark.js"></script><script src="/js/search.js"></script></body></html>