<!DOCTYPE html><html lang="ja-JP"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Core"><link rel="icon" href="/images/favicon.ico" type="image/x-icon"><title>.NETでLinuxと遊んでみる Visual Studio Code編 第1回 · A certain engineer "COMPLEX"</title><meta name="description" content="Introduction前回は、**.NET Core、Visual Studio Code、拡張機能**をインストールしました。


今回はプロジェクトを作って実行します。
Preparationまずは、プロジェクトフォルダを作成します。これはどこでも良いので、今回は、**~/git/Demo/D"><meta name="keywords"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="/css/blogcard.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><script src="/js/jquery.js"></script><meta name="generator" content="Hexo 5.1.0"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.webp" style="width:127px;"><h3 title=""><a href="/">A certain engineer &quot;COMPLEX&quot;</a></h3><div class="description"><p>とある技術者の劣等感</p></div></div></div><ul class="social-links"><li><a target="_blank" rel="noopener" href="https://github.com/takuya-takeuchi"><i class="fa fa-github"></i></a></li><li><a target="_blank" rel="noopener" href="https://twitter.com/takuya_takeuchi"><i class="fa fa-twitter-square"></i></a></li><li><a target="_blank" rel="noopener" href="https://www.facebook.com/takuya.takeuchi.sns"><i class="fa fa-facebook-square"></i></a></li></ul><div class="footer"><div class="p"> <span>© 2020 </span><i class="fa fa-star"></i><span> Core</span></div><div class="by_farbox"><span>Powered by </span><a href="https://hexo.io/" target="_blank">Hexo </a><span> & </span><a href="https://github.com/mrcore/hexo-theme-Anatole-Core" target="_blank">Anatole-Core  </a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="search"><div class="text"><input placeholder="検索ワードを入力してください" id="search-text" onkeypress="javascript:search(event)"></div><div class="btn"><a><i class="fa fa-search"></i></a></div></div><div class="nav"><li><a href="/">ホーム</a></li><li><a href="/archives">アーカイブ</a></li><li><a href="/tags">タグ</a></li><li><a href="/about">自己紹介</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>.NETでLinuxと遊んでみる Visual Studio Code編 第1回</a></h3></div><div class="post-content"><h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>前回は、**.NET Core<strong>、</strong>Visual Studio Code<strong>、</strong>拡張機能**をインストールしました。</p>


<p>今回はプロジェクトを作って実行します。</p>
<h1 id="Preparation"><a href="#Preparation" class="headerlink" title="Preparation"></a>Preparation</h1><p>まずは、プロジェクトフォルダを作成します。<br>これはどこでも良いので、今回は、**~/git/Demo/DotNetCoreLinux1**とします。<br>このフォルダを以降、プロジェクトフォルダと呼称します。</p>
<p>まず端末を開き、プロジェクトフォルダに移動し、下記のコマンドを入力します。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> ~/git/Demo/DotNetCoreLinux1</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> dotnet new</span></span><br><span class="line">Welcome to .NET Core!</span><br><span class="line">---------------------</span><br><span class="line">Learn more about .NET Core @ https://aka.ms/dotnet-docs. Use dotnet --help to see available commands or go to https://aka.ms/dotnet-cli-docs.</span><br><span class="line">Telemetry</span><br><span class="line">--------------</span><br><span class="line">The .NET Core tools collect usage data in order to improve your experience. The data is anonymous and does not include commandline arguments. The data is collected by Microsoft and shared with the community.</span><br><span class="line">You can opt out of telemetry by setting a DOTNET_CLI_TELEMETRY_OPTOUT environment variable to 1 using your favorite shell.</span><br><span class="line">You can read more about .NET Core tools telemetry @ https://aka.ms/dotnet-cli-telemetry.</span><br><span class="line">Configuring...</span><br><span class="line">-------------------</span><br><span class="line">A command is running to initially populate your local package cache, to improve restore speed and enable offline access. This command will take up to a minute to complete and will only happen once.</span><br><span class="line">Decompressing 100% 5707 ms</span><br><span class="line">Expanding 100% 20878 ms</span><br><span class="line">Created new C# project in /home/XXXXX/git/Demo/DotNetCoreLinux1.</span><br></pre></td></tr></table></figure>

<p>初めて<strong>dotnet new</strong>した場合は、環境の初期化が実行されます。<br>以降は表示されません。</p>
<p>これにより、プロジェクトフォルダ配下に</p>
<ul>
<li><strong>Program.cs</strong></li>
<li><strong>project.json</strong></li>
</ul>
<p>が生成されます。<br>なお、<strong>project.json</strong>によるプロジェクト管理は、.NET Core 2.0から廃止が決定されています。<br>下記では、.NET Core 2.0のプレビュー利用しました。作成されたのは、<strong>corecli.csproj</strong>という見慣れた拡張子でした。</p>


<p>なので、正直、.NET Core 1.1系で勉強する意味は無いのですが、Linux初心者な自分にとっては、Linuxを使って何かをなすことが大事なので無視します。<br>ですが、2017/05/16に.NET Core 2.0の正式なプレビューがリリースされました。</p>
<div class="blog-card"><div class="hbc-link-wrap"><a class="hbc-link" href="https://www.infoq.com/jp/news/2017/05/netcore2preview?utm_campaign=rightbar_v2&utm_source=infoq&utm_medium=news_link&utm_content=link_text" target="_blank" rel="nofollow"><div class="hbc-card"><div class="hbc-info"><img class="hbc-favicon" src="http://www.google.com/s2/favicons?domain=www.infoq.com"></img><div class="hbc-site-name">InfoQ</div></div><div class="hbc-contents"><div class="hbc-thumbnail"><img src="https://cdn.infoq.com/statics_s1_20220427053950/styles/static/images/logo/logo-big.jpg"></img></div><div class="hbc-text"><div class="hbc-title">.NET Core 2.0 Previewリリース、Visual Basicをサポート </div><div class="hbc-url">https://www.infoq.com/jp/news/2017/05/netcore2preview?utm_campaign=rightbar_v2&utm_source=infoq&utm_medium=news_link&utm_content=link_text</div><div class="hbc-description">Microsoftが.NET Core 2 Preview 1のリリースを発表した。.NET Standard 2準拠になり、はじめてVisual Basicをサポートする。</div></div></div></div></a></div></div>

<p>なので、RHELでのサポートも近いでしょう。</p>
<h1 id="Build"><a href="#Build" class="headerlink" title="Build"></a>Build</h1><p>準備が出来ました。<br>プロジェクトの作成が出来たので、ビルドして実行します。<br>単純にHello, Worldと表示されるだけですが、重要なのは、環境構築ができており、.NET Coreを使ったプログラミングが可能であることの確認です。</p>
<p>まず、下記のコマンドを実行し、リストアします。<br>newした直後は、最低限しかファイルが内ので、nugetのリストアみたいに依存関係にあるライブラリの復元を行います。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> dotnet restore</span></span><br><span class="line">log  : Restoring packages for /home/XXXXXX/git/Demo/DotNetCoreLinux1/project.json...</span><br><span class="line">log  : Installing System.Reflection.Metadata 1.4.1.</span><br><span class="line">log  : Installing System.Collections.Immutable 1.3.0.</span><br><span class="line">log  : Writing lock file to disk. Path: /home/XXXXXX/git/Demo/DotNetCoreLinux1/project.lock.json</span><br><span class="line">log  : /home/XXXXXX/git/Demo/DotNetCoreLinux1/project.json</span><br><span class="line">log  : Restore completed in 6214ms.</span><br></pre></td></tr></table></figure>

<p>続いてビルドします。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> dotnet build</span></span><br><span class="line">Project DotNetCoreLinux1 (.NETCoreApp,Version=v1.1) will be compiled because expected outputs are missing</span><br><span class="line">Compiling DotNetCoreLinux1 for .NETCoreApp,Version=v1.1</span><br><span class="line"></span><br><span class="line">Compilation succeeded.</span><br><span class="line">    0 Warning(s)</span><br><span class="line">    0 Error(s)</span><br><span class="line"></span><br><span class="line">Time elapsed 00:00:04.7665117</span><br></pre></td></tr></table></figure>

<h1 id="Run"><a href="#Run" class="headerlink" title="Run"></a>Run</h1><p>エラーがないので、実行します。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> dotnet run Project DotNetCoreLinux1 (.NETCoreApp,Version=v1.1) was previously compiled. Skipping compilation. Hello World!</span></span><br></pre></td></tr></table></figure>

<p>予想通りの結果です。<br>ちなみに、プロジェクトフォルダ直下で<strong>dotnet run</strong>ではなく、次のように、実際のバイナリがあるフォルダで実行も出来ます。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> dotnet run</span></span><br><span class="line">Project DotNetCoreLinux1 (.NETCoreApp,Version=v1.1) was previously compiled. Skipping compilation.</span><br><span class="line">Hello World!</span><br></pre></td></tr></table></figure>

<p>dllとなっていますが、実行ファイルです。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> bin/Debug/netcoreapp1.1/</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> dotnet DotNetCoreLinux1.dll</span></span><br><span class="line">Hello World!</span><br></pre></td></tr></table></figure>

<h1 id="Debug"><a href="#Debug" class="headerlink" title="Debug"></a>Debug</h1><p>まず、コンソールが問題ないことがわかりましたので、プロジェクトフォルダをVisual Studio Codeで開きます。<br><strong>ファイル</strong>-&gt;<strong>フォルダーを開く</strong>で開くことが可能です。</p>
<p><a href="../../../../public/2017/05/acf0aa975f917842a79926093b3c5a06.png"><img src="../../../../public/2017/05/acf0aa975f917842a79926093b3c5a06-1024x693.png"></a></p>
<p>プロジェクトを開いた状態です。</p>
<p><a href="../../../../public/2017/05/a718a47a917da9d8d467c357bcfca2fd.png"><img src="../../../../public/2017/05/a718a47a917da9d8d467c357bcfca2fd-1024x693.png"></a></p>
<p><strong>Program.cs</strong> を選択し、実行可能行の左端をクリックするか、実行可能業にカーソルを置いて <strong>F9</strong> を押下して、ブレークポイントを貼ります。<br>Visual Studioと同じ操作です。</p>
<p><a href="../../../../public/2017/05/30e54297a4a7544fa6afe22d31b30764.png"><img src="../../../../public/2017/05/30e54297a4a7544fa6afe22d31b30764-1024x348.png"></a></p>
<p><strong>F5</strong> を押下してデバッグ実行します。<br>こちらもVisual Studioと同じ操作です。<br>しかし、実行できません。<br>よく見ると、ビルドとデバッグに必要なアセットが見つからないので、追加するかを尋ねられますので、<strong>Yes</strong> と応えます。<br>こういう細かいところはまだ日本語化されていない模様。</p>
<p><a href="../../../../public/2017/05/18e08add50c45088bc6ffa63d667d979.png"><img src="../../../../public/2017/05/18e08add50c45088bc6ffa63d667d979-1024x118.png"></a></p>
<p>再度実行すると、成功し、ブレークポイントで実行が停止しているのがわかります。</p>
<p><a href="../../../../public/2017/05/f5afce25449a3051fd438caf8a5a942e.png"><img src="../../../../public/2017/05/f5afce25449a3051fd438caf8a5a942e-1024x693.png"></a></p>
<h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p>Dockerのようなコンテナでは無く、自分で構築したOS上に、自分で.NET Coreをインストールし、CUI、GUI上で実行、デバッグまで出来るようになりました。<br>次は何か小さなツールを作ってみます。</p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2017-05-24</span><i class="fa fa-tag"></i><a class="tag" href="/categories/Microsoft/" title="Microsoft">Microsoft </a><a class="tag" href="/categories/net-framework/" title="net-framework">net-framework </a><a class="tag" href="/categories/Linux/" title="Linux">Linux </a><a class="tag" href="/categories/netで○○○を試してみる/" title="netで○○○を試してみる">netで○○○を試してみる </a><a class="tag" href="/categories/net-framework/NETで○○○を試してみる/" title=".NETで○○○を試してみる">.NETで○○○を試してみる </a><a class="tag" href="/categories/Linux/Red-Hat-Enterprise-Linux/" title="Red Hat Enterprise Linux">Red Hat Enterprise Linux </a><a class="tag" href="/categories/netで○○○を試してみる/NETでLinuxと遊んでみる/" title=".NETでLinuxと遊んでみる">.NETでLinuxと遊んでみる </a><a class="tag" href="/categories/Visual-Studio-Code/" title="Visual Studio Code">Visual Studio Code </a><a class="tag" href="/categories/NET-Core/" title=".NET Core">.NET Core </a><span class="leancloud_visitors"></span></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="" onclick="javascript:join_favorite()" ref="sidebar"></a></div><div class="twitter"><a class="fa fa-twitter" target="_blank" rel="noopener" href="http://twitter.com/home?status=,https://takuya-takeuchi.github.io/2017/05/24/2389/,A certain engineer &quot;COMPLEX&quot;,.NETでLinuxと遊んでみる Visual Studio Code編 第1回,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2017/05/25/2401/" title=".NETでLinuxと遊んでみる Visual Studio Code編 第1.5回">前へ</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2017/05/22/2366/" title=".NETでLinuxと遊んでみる Visual Studio Code編 第0回">次へ</a></li></ul></div></div></div></div></div><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/js/add-bookmark.js"></script><script src="/js/search.js"></script></body></html>